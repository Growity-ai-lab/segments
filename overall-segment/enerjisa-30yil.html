<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enerjisa 30. Yƒ±l - Segment Analizi | Time & Growity</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Sora:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-primary: #0a0a0f; --bg-secondary: #12121a; --bg-card: #1a1a24; --accent-blue: #00d4ff; --accent-purple: #7c3aed; --accent-orange: #ff6b35; --accent-green: #10b981; --accent-yellow: #f59e0b; --accent-pink: #ec4899; --accent-enerjisa: #ffc107; --accent-enerjisa-dark: #ff9800; --text-primary: #f0f0f5; --text-secondary: #8888a0; --border-color: #2a2a3a; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Sora', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; overflow-x: hidden; }
        .bg-grid { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-image: linear-gradient(rgba(255, 193, 7, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 193, 7, 0.02) 1px, transparent 1px); background-size: 50px 50px; pointer-events: none; z-index: 0; }
        .header { background: rgba(10,10,15,0.95); border-bottom: 1px solid var(--border-color); padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 10; backdrop-filter: blur(20px); }
        .header-left { display: flex; align-items: center; gap: 16px; }
        .nav-btn { padding: 8px 14px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-card); color: var(--text-primary); font-size: 12px; font-family: 'Sora', sans-serif; cursor: pointer; text-decoration: none; transition: all 0.3s; }
        .nav-btn:hover { border-color: var(--accent-enerjisa); background: rgba(255,193,7,0.1); }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 44px; height: 44px; }
        .logo-text h1 { font-size: 18px; font-weight: 600; background: linear-gradient(90deg, #E91E8C, #7B2D8E); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .logo-text .version-line { display: flex; align-items: center; gap: 8px; }
        .logo-text .version { font-size: 10px; color: var(--text-secondary); font-family: 'Space Mono', monospace; }
        .logo-text .update-date { font-size: 10px; color: var(--text-secondary); font-family: 'Space Mono', monospace; opacity: 0.7; }
        .enerjisa-badge { display: flex; align-items: center; gap: 8px; background: rgba(255,193,7,0.15); border: 1px solid rgba(255,193,7,0.4); padding: 8px 14px; border-radius: 10px; margin-left: 16px; }
        .enerjisa-icon { width: 28px; height: 28px; background: linear-gradient(135deg, #ffc107, #ff9800); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; font-family: 'Space Mono', monospace; color: #000; }
        .enerjisa-text { font-size: 13px; font-weight: 600; color: #ffc107; }
        .anniversary-badge { background: linear-gradient(135deg, rgba(255,193,7,0.2), rgba(255,152,0,0.1)); border: 1px solid rgba(255,193,7,0.3); padding: 4px 10px; border-radius: 12px; font-size: 10px; color: #ffc107; font-family: 'Space Mono', monospace; margin-left: 8px; }
        .header-actions { display: flex; gap: 10px; align-items: center; }
        .btn { padding: 10px 16px; border: none; border-radius: 8px; font-size: 11px; font-weight: 600; font-family: 'Sora', sans-serif; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 6px; }
        .btn-secondary { background: var(--bg-card); border: 1px solid var(--border-color); color: var(--text-primary); }
        .btn-secondary:hover { border-color: var(--accent-enerjisa); background: rgba(255,193,7,0.1); }
        .btn-primary { background: linear-gradient(135deg, #ffc107, #ff9800); color: #000; border: none; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(255,193,7,0.3); }
        .main-wrapper { display: flex; flex-direction: column; height: calc(100vh - 65px); position: relative; z-index: 1; }
        .top-section { display: flex; flex: 1; overflow: hidden; }
        .left-panel { width: 280px; background: var(--bg-secondary); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; }
        .panel-header { padding: 16px; border-bottom: 1px solid var(--border-color); }
        .panel-title { font-size: 14px; font-weight: 600; margin-bottom: 10px; }
        .filter-row { display: flex; gap: 6px; flex-wrap: wrap; }
        .filter-btn { padding: 6px 10px; border: 1px solid var(--border-color); border-radius: 6px; background: transparent; color: var(--text-secondary); font-size: 10px; font-family: 'Space Mono', monospace; cursor: pointer; transition: all 0.2s; }
        .filter-btn:hover { border-color: var(--accent-enerjisa); color: var(--text-primary); }
        .filter-btn.active { background: rgba(255,193,7,0.2); border-color: var(--accent-enerjisa); color: var(--accent-enerjisa); }
        .segment-list { flex: 1; overflow-y: auto; padding: 10px; }
        .segment-group { margin-bottom: 8px; }
        .segment-group-header { padding: 10px 12px; background: var(--bg-card); border-radius: 8px; font-size: 11px; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border-left: 3px solid; transition: all 0.2s; }
        .segment-group-header:hover { background: rgba(255,255,255,0.05); }
        .segment-items { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .segment-items.open { max-height: 500px; }
        .segment-item { padding: 8px 12px; margin: 4px 0; background: var(--bg-card); border-radius: 6px; font-size: 11px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: all 0.2s; border: 1px solid transparent; }
        .segment-item:hover { background: rgba(255,193,7,0.1); border-color: rgba(255,193,7,0.3); }
        .segment-item.selected { background: rgba(255,193,7,0.15); border-color: var(--accent-enerjisa); }
        .tier-badge { width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 700; font-family: 'Space Mono', monospace; }
        .tier-super { background: linear-gradient(135deg, #ffd700, #ffaa00); color: #000; }
        .tier-t1 { background: rgba(16,185,129,0.3); color: #34d399; border: 1px solid #10b981; }
        .tier-t2 { background: rgba(0,212,255,0.3); color: #00d4ff; border: 1px solid #00d4ff; }
        .tier-t3 { background: rgba(124,58,237,0.3); color: #a78bfa; border: 1px solid #7c3aed; }
        .tier-t4 { background: rgba(255,107,53,0.3); color: #ff8f6b; border: 1px solid #ff6b35; }
        .center-panel { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .canvas-header { padding: 12px 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; background: var(--bg-secondary); }
        .canvas-title { font-size: 13px; font-weight: 600; font-family: 'Space Mono', monospace; }
        .view-toggle { display: flex; gap: 6px; }
        .view-btn { padding: 6px 12px; border: 1px solid var(--border-color); border-radius: 6px; background: transparent; color: var(--text-secondary); font-size: 10px; font-family: 'Sora', sans-serif; cursor: pointer; transition: all 0.2s; }
        .view-btn:hover { border-color: var(--accent-enerjisa); }
        .view-btn.active { background: rgba(255,193,7,0.2); border-color: var(--accent-enerjisa); color: var(--accent-enerjisa); }
        .canvas-wrap { flex: 1; padding: 20px; position: relative; }
        #quadrantCanvas { width: 100%; height: 100%; display: block; }
        .right-panel { width: 340px; background: var(--bg-secondary); border-left: 1px solid var(--border-color); overflow-y: auto; padding: 16px; }
        .detail-section { margin-bottom: 16px; }
        .detail-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .detail-name { font-size: 16px; font-weight: 600; }
        .detail-parent { font-size: 11px; color: var(--text-secondary); margin-top: 2px; }
        .detail-title { font-size: 11px; font-weight: 600; color: var(--accent-enerjisa); text-transform: uppercase; margin-bottom: 10px; font-family: 'Space Mono', monospace; letter-spacing: 1px; }
        .metrics-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .metric-box { background: var(--bg-card); border-radius: 10px; padding: 12px; border: 1px solid var(--border-color); }
        .metric-value { font-size: 20px; font-weight: 700; font-family: 'Space Mono', monospace; color: var(--accent-enerjisa); }
        .metric-label { font-size: 9px; color: var(--text-secondary); margin-top: 2px; text-transform: uppercase; }
        .strategy-card { background: var(--bg-card); border-radius: 10px; padding: 14px; border: 1px solid var(--border-color); }
        .strategy-title { font-size: 13px; font-weight: 600; color: var(--accent-green); margin-bottom: 8px; }
        .strategy-text { font-size: 11px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px; }
        .strategy-reason { font-size: 10px; color: var(--accent-purple); font-style: italic; padding: 8px; background: rgba(124,58,237,0.1); border-radius: 6px; margin-bottom: 10px; }
        .strategy-tags { display: flex; flex-wrap: wrap; gap: 6px; }
        .strategy-tag { padding: 4px 8px; background: rgba(255,193,7,0.15); border: 1px solid rgba(255,193,7,0.3); border-radius: 10px; font-size: 9px; color: var(--accent-enerjisa); font-family: 'Space Mono', monospace; }
        .platform-reach-section { background: var(--bg-card); border-radius: 10px; padding: 12px; border: 1px solid var(--border-color); }
        .reach-bars { display: flex; flex-direction: column; gap: 8px; }
        .reach-item { display: flex; align-items: center; gap: 10px; }
        .reach-platform { font-size: 10px; font-weight: 600; width: 55px; color: var(--text-secondary); }
        .reach-bar-wrap { flex: 1; height: 8px; background: var(--bg-secondary); border-radius: 4px; overflow: hidden; }
        .reach-bar { height: 100%; border-radius: 4px; transition: width 0.5s ease; }
        .reach-bar.meta { background: linear-gradient(90deg, #1877f2, #42b7ff); }
        .reach-bar.youtube { background: linear-gradient(90deg, #ff0000, #ff6b6b); }
        .reach-bar.tiktok { background: linear-gradient(90deg, #00f2ea, #ff0050); }
        .reach-bar.x { background: linear-gradient(90deg, #1da1f2, #fff); }
        .reach-bar.dv360 { background: linear-gradient(90deg, #34a853, #4ade80); }
        .reach-bar.linkedin { background: linear-gradient(90deg, #0077b5, #00a0dc); }
        .reach-value { font-size: 10px; font-weight: 600; width: 35px; text-align: right; color: var(--accent-enerjisa); font-family: 'Space Mono', monospace; }
        .bottom-panel { position: fixed; bottom: 0; left: 0; right: 0; background: var(--bg-secondary); border-top: 1px solid var(--border-color); transform: translateY(100%); transition: transform 0.3s ease; z-index: 100; max-height: 50vh; overflow-y: auto; }
        .bottom-panel.active { transform: translateY(0); }
        .bottom-content { padding: 20px; }
        .bottom-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .bottom-title { font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 10px; }
        .bottom-subtitle { font-size: 11px; color: var(--text-secondary); font-weight: 400; }
        .close-btn { width: 32px; height: 32px; border-radius: 8px; background: var(--bg-card); border: 1px solid var(--border-color); color: var(--text-secondary); font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .close-btn:hover { border-color: var(--accent-enerjisa); color: var(--text-primary); }
        .bottom-grid { display: grid; grid-template-columns: 300px 1fr; gap: 20px; }
        .bht-impact-section { background: var(--bg-card); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color); }
        .bht-impact-title { font-size: 12px; font-weight: 600; margin-bottom: 14px; color: var(--accent-enerjisa); font-family: 'Space Mono', monospace; }
        .bht-category { margin-bottom: 12px; }
        .bht-category-header { font-size: 11px; font-weight: 600; padding: 8px 10px; border-radius: 8px; margin-bottom: 6px; display: flex; justify-content: space-between; align-items: center; }
        .bht-category-header.awareness { background: rgba(124,58,237,0.2); color: #a78bfa; }
        .bht-category-header.consideration { background: rgba(245,158,11,0.2); color: #fbbf24; }
        .bht-category-header.conversion { background: rgba(16,185,129,0.2); color: #34d399; }
        .bht-impact-value { font-size: 13px; font-weight: 700; font-family: 'Space Mono', monospace; }
        .bht-questions-list { font-size: 10px; color: var(--text-secondary); padding-left: 10px; }
        .bht-question-item { padding: 4px 0; display: flex; align-items: center; gap: 6px; }
        .bht-question-item.recommended { color: var(--text-primary); }
        .bht-question-item.recommended::before { content: '‚òÖ'; color: var(--accent-enerjisa); }
        .platform-section { background: var(--bg-card); border-radius: 12px; padding: 16px; border: 1px solid var(--border-color); }
        .platform-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
        .platform-card { background: var(--bg-secondary); border-radius: 10px; overflow: hidden; border: 1px solid var(--border-color); }
        .platform-header { padding: 8px 10px; font-size: 10px; font-weight: 600; font-family: 'Space Mono', monospace; }
        .platform-header.meta { background: rgba(24,119,242,0.2); color: #60a5fa; border-bottom: 2px solid #1877f2; }
        .platform-header.linkedin { background: rgba(0,119,181,0.2); color: #00a0dc; border-bottom: 2px solid #0077b5; }
        .platform-header.tiktok { background: rgba(0,242,234,0.15); color: #00f2ea; border-bottom: 2px solid #00f2ea; }
        .platform-header.youtube { background: rgba(255,0,0,0.15); color: #f87171; border-bottom: 2px solid #ff0000; }
        .platform-header.dv360 { background: rgba(52,168,83,0.2); color: #4ade80; border-bottom: 2px solid #34a853; }
        .platform-body { padding: 8px; }
        .targeting-row { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 9px; }
        .targeting-row:last-child { border-bottom: none; }
        .targeting-type { color: var(--text-secondary); }
        .targeting-value { color: var(--text-primary); text-align: right; max-width: 65%; }
        .bht-mini { font-size: 7px; padding: 2px 4px; border-radius: 4px; margin-left: 4px; font-family: 'Space Mono', monospace; }
        .bht-mini.aw { background: rgba(124,58,237,0.3); color: #a78bfa; }
        .bht-mini.co { background: rgba(245,158,11,0.3); color: #fbbf24; }
        .bht-mini.cv { background: rgba(16,185,129,0.3); color: #34d399; }
        .extra-targeting-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 14px; }
        .extra-targeting-card { background: var(--bg-secondary); border-radius: 10px; overflow: hidden; border: 1px solid var(--border-color); }
        .extra-targeting-header { padding: 8px 10px; font-size: 10px; font-weight: 600; background: rgba(255,255,255,0.05); color: var(--accent-enerjisa); border-bottom: 1px solid var(--border-color); font-family: 'Space Mono', monospace; }
        .extra-targeting-body { padding: 8px 10px; }
        .extra-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; font-size: 10px; border-bottom: 1px solid rgba(255,255,255,0.03); }
        .extra-item:last-child { border-bottom: none; }
        .extra-item-icon { width: 6px; height: 6px; border-radius: 50%; }
        .extra-item-icon.lifestyle { background: var(--accent-purple); }
        .extra-item-icon.affinity { background: var(--accent-green); }
        .extra-item-icon.inmarket { background: var(--accent-orange); }
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: var(--text-secondary); text-align: center; padding: 24px; }
        .empty-icon { font-size: 36px; margin-bottom: 10px; opacity: 0.5; }
        .tooltip { position: fixed; background: rgba(26,26,36,0.98); padding: 12px 16px; border-radius: 10px; font-size: 11px; pointer-events: none; z-index: 1000; display: none; max-width: 260px; border: 1px solid var(--border-color); backdrop-filter: blur(20px); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-enerjisa); }
        /* Anniversary Animation */
        @keyframes glow { 0%, 100% { box-shadow: 0 0 5px rgba(255,193,7,0.3); } 50% { box-shadow: 0 0 20px rgba(255,193,7,0.5); } }
        .anniversary-glow { animation: glow 2s infinite; }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <header class="header">
        <div class="header-left">
            <a href="index.html" class="nav-btn">‚Üê K√ºt√ºphane</a>
            <a href="segmentation-quadrant.html" class="nav-btn">Quadrant</a>
            <a href="po-segmentasyon.html" class="nav-btn" style="border-color: rgba(227,30,36,0.4); color: #e31e24;">üéØ PO</a>
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 44 44" width="44" height="44">
                        <circle cx="15" cy="22" r="11" fill="none" stroke="#E91E8C" stroke-width="4"/>
                        <circle cx="29" cy="22" r="11" fill="none" stroke="#7B2D8E" stroke-width="4"/>
                        <path d="M15 11 A11 11 0 0 0 15 33" fill="none" stroke="#E91E8C" stroke-width="4"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <h1>Time & Growity</h1>
                    <div class="version-line">
                        <span class="version">Enerjisa Tool v1.0</span>
                        <span class="update-date">‚Ä¢ Ocak 2026</span>
                    </div>
                </div>
            </div>
            <div class="enerjisa-badge anniversary-glow">
                <div class="enerjisa-icon">‚ö°</div>
                <span class="enerjisa-text">Enerjisa</span>
                <span class="anniversary-badge">30. YIL</span>
            </div>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="exportPNG()">üì• PNG</button>
            <button class="btn btn-secondary" onclick="exportExcel()">üìä Excel</button>
            <button class="btn btn-primary" onclick="exportStrategy()">‚ö° Strateji Raporu</button>
        </div>
    </header>
    <div class="main-wrapper">
        <div class="top-section">
            <div class="left-panel">
                <div class="panel-header">
                    <div class="panel-title">17 Segment ‚Ä¢ 30. Yƒ±l Kampanyasƒ±</div>
                    <div class="filter-row">
                        <button class="filter-btn active" data-tier="all" onclick="filterTier('all')">T√ºm√º</button>
                        <button class="filter-btn" data-tier="super" onclick="filterTier('super')">‚≠ê</button>
                        <button class="filter-btn" data-tier="t1" onclick="filterTier('t1')">T1</button>
                        <button class="filter-btn" data-tier="t2" onclick="filterTier('t2')">T2</button>
                        <button class="filter-btn" data-tier="t3" onclick="filterTier('t3')">T3</button>
                    </div>
                </div>
                <div class="segment-list" id="segmentList"></div>
            </div>
            <div class="center-panel">
                <div class="canvas-header">
                    <div class="canvas-title">‚ö° 30. Yƒ±l Segment Quadrant</div>
                    <div class="view-toggle">
                        <button class="view-btn active" onclick="setView('all')">T√ºm√º</button>
                        <button class="view-btn" onclick="setView('Influencer (Etkileyiciler)')">B2C</button>
                        <button class="view-btn" onclick="setView('Gatekeepers (Kapƒ± Bek√ßileri)')">Gatekeepers</button>
                        <button class="view-btn" onclick="setView('Decision Makers (Karar Vericiler)')">Decision</button>
                    </div>
                </div>
                <div class="canvas-wrap"><canvas id="quadrantCanvas"></canvas></div>
            </div>
            <div class="right-panel">
                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">‚ö°</div>
                    <div style="font-size:12px;color:var(--text-secondary);">Segment Se√ßin</div>
                    <div style="font-size:10px;color:var(--text-secondary);margin-top:6px;">30. yƒ±l kampanyasƒ± i√ßin bir segment tƒ±klayƒ±n</div>
                </div>
                <div id="detailPanel" style="display:none;">
                    <div class="detail-section">
                        <div class="detail-header">
                            <div class="tier-badge" id="detailTier">T1</div>
                            <div>
                                <div class="detail-name" id="detailName">Segment</div>
                                <div class="detail-parent" id="detailParent">Parent</div>
                            </div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <div class="detail-title">üìä Metrikler</div>
                        <div class="metrics-grid">
                            <div class="metric-box"><div class="metric-value" id="metricX">50</div><div class="metric-label" id="metricXLabel">Eri≈üilebilirlik</div></div>
                            <div class="metric-box"><div class="metric-value" id="metricY">50</div><div class="metric-label" id="metricYLabel">Deƒüer Potansiyeli</div></div>
                            <div class="metric-box"><div class="metric-value" id="metricSize">50</div><div class="metric-label" id="metricSizeLabel">Eri≈üim Hacmi</div></div>
                            <div class="metric-box"><div class="metric-value" id="metricTier">T1</div><div class="metric-label">√ñncelik</div></div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <div class="detail-title">üéØ 30. Yƒ±l Strateji √ñnerisi</div>
                        <div class="strategy-card">
                            <div class="strategy-title" id="strategyTitle">Kampanya Stratejisi</div>
                            <div class="strategy-text" id="strategyText">Strateji a√ßƒ±klamasƒ± burada g√∂r√ºnecek.</div>
                            <div class="strategy-reason" id="strategyReason">Neden bu strateji?</div>
                            <div class="strategy-tags" id="strategyTags"></div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <div class="detail-title">üì° Platform Ula≈üƒ±labilirlik</div>
                        <div class="platform-reach-section">
                            <div class="reach-bars" id="reachBars"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom-panel" id="bottomPanel">
            <div class="bottom-content">
                <div class="bottom-header">
                    <div class="bottom-title">
                        <span id="bottomSegName">Segment</span>
                        <span class="bottom-subtitle" id="bottomSegParent"></span>
                    </div>
                    <button class="close-btn" onclick="closeBottomPanel()">‚úï</button>
                </div>
                <div class="bottom-grid">
                    <div class="bht-impact-section">
                        <div class="bht-impact-title">‚ö° 30. Yƒ±l Mesaj Analizi</div>
                        <div class="bht-category">
                            <div class="bht-category-header awareness"><span>Awareness</span><span class="bht-impact-value" id="awImpact">+12%</span></div>
                            <div class="bht-questions-list" id="awQuestions"></div>
                        </div>
                        <div class="bht-category">
                            <div class="bht-category-header consideration"><span>Consideration</span><span class="bht-impact-value" id="coImpact">+8%</span></div>
                            <div class="bht-questions-list" id="coQuestions"></div>
                        </div>
                        <div class="bht-category">
                            <div class="bht-category-header conversion"><span>Conversion</span><span class="bht-impact-value" id="cvImpact">+5%</span></div>
                            <div class="bht-questions-list" id="cvQuestions"></div>
                        </div>
                    </div>
                    <div class="platform-section">
                        <div class="bht-impact-title">üéØ Platform Hedefleme √ñnerileri</div>
                        <div class="platform-grid">
                            <div class="platform-card"><div class="platform-header meta">Meta</div><div class="platform-body" id="metaTargeting"></div></div>
                            <div class="platform-card"><div class="platform-header linkedin">LinkedIn</div><div class="platform-body" id="linkedinTargeting"></div></div>
                            <div class="platform-card"><div class="platform-header tiktok">TikTok</div><div class="platform-body" id="tiktokTargeting"></div></div>
                            <div class="platform-card"><div class="platform-header youtube">YouTube</div><div class="platform-body" id="youtubeTargeting"></div></div>
                            <div class="platform-card"><div class="platform-header dv360">DV360</div><div class="platform-body" id="dv360Targeting"></div></div>
                        </div>
                        <div class="extra-targeting-grid">
                            <div class="extra-targeting-card"><div class="extra-targeting-header">Lifestyle Segments</div><div class="extra-targeting-body" id="lifestyleTargeting"></div></div>
                            <div class="extra-targeting-card"><div class="extra-targeting-header">Affinity Audiences</div><div class="extra-targeting-body" id="affinityTargeting"></div></div>
                            <div class="extra-targeting-card"><div class="extra-targeting-header">In-Market Segments</div><div class="extra-targeting-body" id="inmarketTargeting"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tooltip" id="tooltip"></div>
    <script>
        // 30. Yƒ±l BHT Sorularƒ±
        const bhtQ = {
            awareness: [
                { id: 'aw1', text: 'Enerjisa 30 yƒ±ldƒ±r hizmet veriyor', isNew: true, impact: 18 },
                { id: 'aw2', text: 'Kesintisiz enerji g√ºvencesi sunuyor', isNew: true, impact: 15 },
                { id: 'aw3', text: 'Dijital hizmetlerde √∂nc√º', isNew: true, impact: 12 },
                { id: 'aw4', text: 'S√ºrd√ºr√ºlebilir enerji lideri', isNew: false, impact: 10 },
                { id: 'aw5', text: 'M√º≈üteri memnuniyetinde g√ºvenilir', isNew: false, impact: 8 },
                { id: 'aw6', text: 'Yenilik√ßi ve modern marka', isNew: false, impact: 6 }
            ],
            consideration: [
                { id: 'co1', text: 'Enerji ihtiya√ßlarƒ±m i√ßin tercih ederim', isNew: true, impact: 14 },
                { id: 'co2', text: 'Dijital i≈ülemler √ßok kolay', isNew: true, impact: 12 },
                { id: 'co3', text: 'Fatura √∂demesi pratik', isNew: true, impact: 10 },
                { id: 'co4', text: 'M√º≈üteri hizmetleri kaliteli', isNew: true, impact: 9 },
                { id: 'co5', text: 'Ye≈üil enerji se√ßenekleri var', isNew: false, impact: 7 },
                { id: 'co6', text: '√á√∂z√ºm odaklƒ± yakla≈üƒ±m', isNew: false, impact: 6 }
            ],
            conversion: [
                { id: 'cv1', text: 'Uygulamayƒ± indirirdim', isNew: true, impact: 16 },
                { id: 'cv2', text: 'E-faturaya ge√ßerdim', isNew: true, impact: 12 },
                { id: 'cv3', text: 'Abonelik ba≈üvurusu yapardƒ±m', isNew: true, impact: 10 },
                { id: 'cv4', text: 'Tavsiye ederim', isNew: false, impact: 8 },
                { id: 'cv5', text: 'Sosyal medyada takip ederim', isNew: false, impact: 5 }
            ]
        };

        // Segment BHT √ñnerileri
        const segBhtRec = {
            'Influencer (Etkileyiciler)': ['aw1', 'aw2', 'aw3', 'co1', 'co2', 'cv1', 'cv2'],
            'Gatekeepers (Kapƒ± Bek√ßileri)': ['aw1', 'aw4', 'aw5', 'co4', 'co5', 'cv4'],
            'Decision Makers (Karar Vericiler)': ['aw1', 'aw4', 'aw6', 'co5', 'co6', 'cv3', 'cv4']
        };

        // Platform Hedefleme
        const targetT = {
            'Influencer (Etkileyiciler)': {
                meta: [{ type: 'Interest', target: 'Ev, Aile, Teknoloji', bht: 'aw' }, { type: 'Behavior', target: 'Mobile app users', bht: 'co' }, { type: 'LAL', target: 'Mevcut m√º≈üteriler %1-3', bht: 'cv' }],
                linkedin: [{ type: 'Job Title', target: 'Business Owner, Manager', bht: 'aw' }, { type: 'Industry', target: 'Retail, Manufacturing', bht: 'co' }],
                tiktok: [{ type: 'Interest', target: 'Home, Technology', bht: 'aw' }, { type: 'Hashtag', target: '#enerji #tasarruf', bht: 'co' }],
                youtube: [{ type: 'Affinity', target: 'Home Improvement', bht: 'aw' }, { type: 'In-Market', target: 'Utilities', bht: 'co' }],
                dv360: [{ type: 'Affinity', target: 'Homeowners', bht: 'aw' }, { type: 'In-Market', target: 'Energy Services', bht: 'co' }],
                reach: { meta: 92, youtube: 78, tiktok: 65, linkedin: 45, dv360: 82 },
                lifestyle: ['Tech-Savvy Families', 'Digital-First Consumers', 'Home Improvers', 'Budget-Conscious'],
                affinity: ['Home & Garden Enthusiasts', 'Technology Adopters', 'DIY Enthusiasts', 'Mobile App Users'],
                inmarket: ['Utilities', 'Mobile Apps', 'Smart Home', 'Energy Services']
            },
            'Gatekeepers (Kapƒ± Bek√ßileri)': {
                meta: [{ type: 'Interest', target: 'Local Government, Community', bht: 'aw' }, { type: 'Behavior', target: 'Public sector', bht: 'co' }],
                linkedin: [{ type: 'Job Title', target: 'Mayor, Director, Manager', bht: 'aw' }, { type: 'Industry', target: 'Government, NGO', bht: 'co' }, { type: 'Seniority', target: 'Director+', bht: 'cv' }],
                tiktok: [{ type: 'Interest', target: 'Community, Sustainability', bht: 'aw' }],
                youtube: [{ type: 'Affinity', target: 'News & Politics', bht: 'aw' }, { type: 'Custom', target: 'Local news channels', bht: 'co' }],
                dv360: [{ type: 'Contextual', target: 'Government sites', bht: 'aw' }, { type: 'Affinity', target: 'Sustainability', bht: 'co' }],
                reach: { meta: 55, youtube: 48, tiktok: 25, linkedin: 85, dv360: 62 },
                lifestyle: ['Community Leaders', 'Public Servants', 'Sustainability Advocates', 'Local Influencers'],
                affinity: ['News Junkies', 'Political Engaged', 'Community Builders', 'Environmental Conscious'],
                inmarket: ['Government Services', 'B2B Services', 'Professional Development', 'Sustainability Solutions']
            },
            'Decision Makers (Karar Vericiler)': {
                meta: [{ type: 'Interest', target: 'Finance, Investment, ESG', bht: 'aw' }, { type: 'Behavior', target: 'Business decision makers', bht: 'co' }],
                linkedin: [{ type: 'Job Title', target: 'CEO, CFO, Board Member', bht: 'aw' }, { type: 'Industry', target: 'Energy, Finance, Utilities', bht: 'co' }, { type: 'Company Size', target: '500+', bht: 'cv' }],
                tiktok: [{ type: 'Note', target: 'D√º≈ü√ºk √∂ncelik', bht: 'aw' }],
                youtube: [{ type: 'Affinity', target: 'Business News', bht: 'aw' }, { type: 'In-Market', target: 'Financial Services', bht: 'co' }],
                dv360: [{ type: 'Contextual', target: 'Finance sites, Bloomberg', bht: 'aw' }, { type: 'Affinity', target: 'Investors', bht: 'co' }],
                reach: { meta: 42, youtube: 55, tiktok: 15, linkedin: 95, dv360: 68 },
                lifestyle: ['C-Suite Executives', 'Institutional Investors', 'Policy Makers', 'Strategic Partners'],
                affinity: ['Business Leaders', 'Financial Experts', 'Energy Sector Professionals', 'ESG Investors'],
                inmarket: ['Investment Services', 'B2B Energy Solutions', 'Corporate Partnerships', 'ESG Investments']
            }
        };

        // 30. Yƒ±l Strateji Verileri
        const strategyData = {
            'Hane Halklarƒ± - Kesintisiz Enerji': { 
                title: '30 Yƒ±l G√ºvence Mesajƒ±', 
                text: '30 yƒ±llƒ±k tecr√ºbe ile kesintisiz enerji g√ºvencesi vurgulayƒ±n. "30 yƒ±ldƒ±r yanƒ±nƒ±zdayƒ±z, 30 yƒ±l daha yanƒ±nƒ±zda olacaƒüƒ±z" ana mesajƒ±. Aile ve ev odaklƒ± g√∂rsellerle duygusal baƒü kurun.', 
                reason: 'G√ºven ve s√ºreklilik mesajƒ± hane halklarƒ±nƒ±n en √∂nemli karar kriteri. 30 yƒ±l rakamƒ± g√º√ßl√º bir sosyal kanƒ±t.', 
                tags: ['Trust Building', 'Family Focus', 'Anniversary', 'Emotional'] 
            },
            'Hane Halklarƒ± - Dijital M√º≈üteri': { 
                title: 'Dijital D√∂n√º≈ü√ºm Lideri', 
                text: '30 yƒ±llƒ±k yolculukta dijital d√∂n√º≈ü√ºm hikayesini anlatƒ±n. "30 yƒ±lda 30 milyon dijital i≈ülem" gibi somut rakamlarla app indirme ve e-fatura kampanyasƒ±.', 
                reason: 'Teknoloji meraklƒ±sƒ± segment i√ßin inovasyon mesajƒ± kritik. Rakamsal kanƒ±tlar g√ºven yaratƒ±r.', 
                tags: ['Digital First', 'App Campaign', 'Innovation', 'Stats-Driven'] 
            },
            'Mobil Kullanƒ±cƒ±lar': { 
                title: '30. Yƒ±l √ñzel App √ñzellikleri', 
                text: '30. yƒ±la √∂zel app i√ßi kampanyalar ve yeni √∂zellikler. "30 g√ºn √ºcretsiz premium", "30. yƒ±l badge\'i" gibi gamification elementleri. Push notification ile engagement.', 
                reason: 'Gen√ß segment i√ßin gamification ve √∂zel i√ßerik conversion\'ƒ± artƒ±rƒ±r. App retention kritik.', 
                tags: ['Gamification', 'App Features', 'Push Notifications', 'Youth Focus'] 
            },
            'K√º√ß√ºk ƒ∞≈ületmeler': { 
                title: 'KOBƒ∞ Enerji Ortaƒüƒ±', 
                text: '30 yƒ±ldƒ±r T√ºrkiye ekonomisinin b√ºy√ºmesine destek mesajƒ±. KOBƒ∞\'ler i√ßin √∂zel 30. yƒ±l enerji paketi ve tasarruf danƒ±≈ümanlƒ±ƒüƒ±. B2B referans hikayeleri.', 
                reason: 'ƒ∞≈ületmeler i√ßin maliyet optimizasyonu ve g√ºvenilir ortaklƒ±k kritik. Referanslar karar s√ºrecini hƒ±zlandƒ±rƒ±r.', 
                tags: ['B2B Focus', 'Cost Optimization', 'Partnership', 'Case Studies'] 
            },
            'Enerjisa √áalƒ±≈üanlarƒ±': { 
                title: 'Tek Takƒ±m 30. Yƒ±l Gururu', 
                text: 'ƒ∞√ß ileti≈üimde 30 yƒ±llƒ±k ba≈üarƒ± hikayesi ve √ßalƒ±≈üan katkƒ±sƒ± vurgusu. "30 yƒ±lƒ± birlikte yazdƒ±k" temasƒ±yla aidiyet ve gurur duygusunu g√º√ßlendirin.', 
                reason: 'Marka el√ßileri olarak √ßalƒ±≈üanlarƒ±n motivasyonu dƒ±≈ü ileti≈üimi de g√º√ßlendirir.', 
                tags: ['Internal Comms', 'Pride', 'Team Spirit', 'Ambassador'] 
            },
            'G√ºven Odaklƒ± T√ºketiciler': { 
                title: '≈ûeffaf 30 Yƒ±l', 
                text: '30 yƒ±llƒ±k ≈üeffaflƒ±k ve d√ºr√ºst ileti≈üim vurgusu. M√º≈üteri hikayeleri, problem √ß√∂zme √∂rnekleri ve net fatura a√ßƒ±klamalarƒ± ile g√ºven in≈üasƒ±.', 
                reason: 'G√ºven odaklƒ± segment i√ßin somut kanƒ±tlar ve ≈üeffaflƒ±k en etkili strateji.', 
                tags: ['Transparency', 'Trust Building', 'Customer Stories', 'Clear Communication'] 
            },
            'Yerel Y√∂netimler': { 
                title: '30 Yƒ±l Topluma Hizmet', 
                text: 'Belediyelerle 30 yƒ±llƒ±k i≈ü birliƒüi hikayeleri. Altyapƒ± yatƒ±rƒ±mlarƒ±, istihdama katkƒ± ve toplumsal sorumluluk projeleri ile kurumsal ili≈üki g√º√ßlendirme.', 
                reason: 'Kamu sekt√∂r√º i√ßin toplumsal fayda ve uzun vadeli ortaklƒ±k kritik.', 
                tags: ['Public Relations', 'Infrastructure', 'Social Responsibility', 'Long-term Partnership'] 
            },
            'Muhtarlar': { 
                title: 'Mahalle Mahalle 30 Yƒ±l', 
                text: 'Mahalle d√ºzeyinde 30 yƒ±llƒ±k hizmet hikayeleri. Muhtarlarla ortak etkinlikler, mahalle bulu≈ümalarƒ± ve doƒürudan ileti≈üim kanallarƒ±.', 
                reason: 'Grassroots yakla≈üƒ±m ile toplum liderlerini marka el√ßisine d√∂n√º≈üt√ºrme.', 
                tags: ['Community Outreach', 'Direct Contact', 'Local Events', 'Grassroots'] 
            },
            'STK ve Sivil Toplum': { 
                title: '30 Yƒ±l S√ºrd√ºr√ºlebilirlik', 
                text: '√áevre ve s√ºrd√ºr√ºlebilirlik projelerinde 30 yƒ±llƒ±k katkƒ±. Ye≈üil enerji yatƒ±rƒ±mlarƒ±, karbon ayak izi azaltma ve STK i≈übirlikleri.', 
                reason: 'Sivil toplum i√ßin √ßevresel etki ve toplumsal fayda en √∂nemli deƒüerler.', 
                tags: ['Sustainability', 'Green Energy', 'NGO Partnership', 'Environmental Impact'] 
            },
            'Akademik Kurumlar': { 
                title: '30 Yƒ±l Bilim ve ƒ∞novasyon', 
                text: '√úniversitelerle Ar-Ge i≈übirlikleri ve akademik sponsorluklar. Enerji d√∂n√º≈ü√ºm√º konferanslarƒ± ve burs programlarƒ±.', 
                reason: 'Akademik √ßevre i√ßin bilimsel katkƒ± ve bilgi payla≈üƒ±mƒ± kritik.', 
                tags: ['R&D Partnership', 'Academic Sponsorship', 'Innovation', 'Knowledge Sharing'] 
            },
            'S√ºrd√ºr√ºlebilirlik Partnerleri': { 
                title: '30 Yƒ±l Ye≈üil Gelecek', 
                text: 'ESG odaklƒ± i≈ü ortaklarƒ± i√ßin ye≈üil enerji d√∂n√º≈ü√ºm√º vizyonu. Karbon n√∂tr hedefleri ve s√ºrd√ºr√ºlebilirlik raporlamasƒ±.', 
                reason: 'ESG yatƒ±rƒ±mcƒ±larƒ± i√ßin somut √ßevresel hedefler ve ≈üeffaf raporlama kritik.', 
                tags: ['ESG Focus', 'Carbon Neutral', 'Green Transition', 'Reporting'] 
            },
            'Devlet Kurumlarƒ±': { 
                title: '30 Yƒ±l Enerji G√ºvenliƒüi', 
                text: 'T√ºrkiye\'nin enerji g√ºvenliƒüine 30 yƒ±llƒ±k katkƒ±. Altyapƒ± yatƒ±rƒ±mlarƒ±, yerli √ºretim ve stratejik ortaklƒ±k vurgusu.', 
                reason: 'Kamu otoriteleri i√ßin ulusal enerji g√ºvenliƒüi ve stratejik √∂ncelikler kritik.', 
                tags: ['Energy Security', 'National Priority', 'Infrastructure', 'Strategic Partnership'] 
            },
            'Reg√ºlat√∂rler': { 
                title: '30 Yƒ±l Uyum ve ≈ûeffaflƒ±k', 
                text: 'Reg√ºlasyona uyum ve sekt√∂r standardƒ± belirleme konusunda 30 yƒ±llƒ±k tecr√ºbe. D√ºzenleyici kurumlarla proaktif i≈ü birliƒüi.', 
                reason: 'Reg√ºlat√∂rler i√ßin uyum, ≈üeffaflƒ±k ve sekt√∂r liderliƒüi kritik.', 
                tags: ['Compliance', 'Transparency', 'Industry Standards', 'Proactive Communication'] 
            },
            'Kurumsal Yatƒ±rƒ±mcƒ±lar': { 
                title: '30 Yƒ±l Deƒüer Yaratma', 
                text: 'Yatƒ±rƒ±mcƒ±lara 30 yƒ±llƒ±k finansal performans ve gelecek vizyonu. ESG skorlarƒ±, temett√º politikasƒ± ve b√ºy√ºme stratejisi.', 
                reason: 'Kurumsal yatƒ±rƒ±mcƒ±lar i√ßin finansal performans ve ESG kritik karar kriterleri.', 
                tags: ['Financial Performance', 'ESG Scores', 'Dividend Policy', 'Growth Strategy'] 
            },
            'Bireysel Yatƒ±rƒ±mcƒ±lar': { 
                title: '30 Yƒ±l G√ºvenilir Yatƒ±rƒ±m', 
                text: 'Bireysel yatƒ±rƒ±mcƒ±lara 30 yƒ±llƒ±k borsa performansƒ± ve gelecek potansiyeli. Kolay anla≈üƒ±lƒ±r finansal bilgi ve yatƒ±rƒ±mcƒ± g√ºnleri.', 
                reason: 'Bireysel yatƒ±rƒ±mcƒ±lar i√ßin anla≈üƒ±lƒ±r bilgi ve g√ºven kritik.', 
                tags: ['Retail Investor', 'Stock Performance', 'Investor Relations', 'Accessible Information'] 
            },
            'Stratejik ƒ∞≈ü Ortaklarƒ±': { 
                title: '30 Yƒ±l G√º√ßl√º Ortaklƒ±k', 
                text: 'ƒ∞≈ü ortaklarƒ±na 30 yƒ±llƒ±k ba≈üarƒ±lƒ± i≈übirliƒüi √∂rnekleri. Enerji d√∂n√º≈ü√ºm√ºnde ortak projeler ve win-win yakla≈üƒ±mƒ±.', 
                reason: 'Stratejik ortaklar i√ßin uzun vadeli deƒüer ve kar≈üƒ±lƒ±klƒ± fayda kritik.', 
                tags: ['Strategic Partnership', 'Joint Ventures', 'Win-Win', 'Long-term Value'] 
            }
        };
        const defaultStrategy = { title: '30. Yƒ±l Stratejisi', text: 'Bu segment i√ßin 30. yƒ±l temasƒ±na uygun √∂zelle≈ütirilmi≈ü kampanya stratejisi geli≈ütirin. Segmentin temel motivasyonlarƒ±nƒ± ve davranƒ±≈ü kalƒ±plarƒ±nƒ± analiz ederek hedefe y√∂nelik mesajla≈üma olu≈üturun.', reason: '30. yƒ±l temasƒ± ile segment karakteristiƒüini birle≈ütirerek etki olu≈üturun.', tags: ['30th Anniversary', 'Targeted', 'Data-Driven'] };

        // Segment Verileri - Enerjisa 30. Yƒ±l
        const segments = [
            // B2C - Influencer
            { parent: 'Influencer (Etkileyiciler)', name: 'Hane Halklarƒ± - Kesintisiz Enerji', x: 85, y: 90, size: 95, tier: 'S√ºper' },
            { parent: 'Influencer (Etkileyiciler)', name: 'G√ºven Odaklƒ± T√ºketiciler', x: 80, y: 85, size: 90, tier: 'S√ºper' },
            { parent: 'Influencer (Etkileyiciler)', name: 'Hane Halklarƒ± - Dijital M√º≈üteri', x: 90, y: 75, size: 80, tier: 'T1' },
            { parent: 'Influencer (Etkileyiciler)', name: 'Mobil Kullanƒ±cƒ±lar', x: 95, y: 65, size: 85, tier: 'T1' },
            { parent: 'Influencer (Etkileyiciler)', name: 'K√º√ß√ºk ƒ∞≈ületmeler', x: 65, y: 80, size: 70, tier: 'T1' },
            { parent: 'Influencer (Etkileyiciler)', name: 'Enerjisa √áalƒ±≈üanlarƒ±', x: 50, y: 95, size: 40, tier: 'T2' },
            // Gatekeepers
            { parent: 'Gatekeepers (Kapƒ± Bek√ßileri)', name: 'Yerel Y√∂netimler', x: 40, y: 85, size: 55, tier: 'T1' },
            { parent: 'Gatekeepers (Kapƒ± Bek√ßileri)', name: 'Muhtarlar', x: 35, y: 70, size: 60, tier: 'T2' },
            { parent: 'Gatekeepers (Kapƒ± Bek√ßileri)', name: 'STK ve Sivil Toplum', x: 45, y: 75, size: 50, tier: 'T2' },
            { parent: 'Gatekeepers (Kapƒ± Bek√ßileri)', name: 'Akademik Kurumlar', x: 30, y: 80, size: 45, tier: 'T3' },
            { parent: 'Gatekeepers (Kapƒ± Bek√ßileri)', name: 'S√ºrd√ºr√ºlebilirlik Partnerleri', x: 50, y: 65, size: 48, tier: 'T2' },
            // Decision Makers
            { parent: 'Decision Makers (Karar Vericiler)', name: 'Kurumsal Yatƒ±rƒ±mcƒ±lar', x: 25, y: 95, size: 50, tier: 'T1' },
            { parent: 'Decision Makers (Karar Vericiler)', name: 'Stratejik ƒ∞≈ü Ortaklarƒ±', x: 35, y: 90, size: 55, tier: 'T1' },
            { parent: 'Decision Makers (Karar Vericiler)', name: 'Bireysel Yatƒ±rƒ±mcƒ±lar', x: 55, y: 60, size: 65, tier: 'T2' },
            { parent: 'Decision Makers (Karar Vericiler)', name: 'Devlet Kurumlarƒ±', x: 15, y: 90, size: 35, tier: 'T2' },
            { parent: 'Decision Makers (Karar Vericiler)', name: 'Reg√ºlat√∂rler', x: 20, y: 85, size: 30, tier: 'T3' }
        ];

        const parentColors = { 
            'Influencer (Etkileyiciler)': { bg: 'rgba(255,193,7,0.2)', border: '#ffc107' }, 
            'Gatekeepers (Kapƒ± Bek√ßileri)': { bg: 'rgba(20,184,166,0.2)', border: '#14b8a6' }, 
            'Decision Makers (Karar Vericiler)': { bg: 'rgba(99,102,241,0.2)', border: '#6366f1' }
        };
        const tierCfg = { 'S√ºper': { icon: '‚≠ê', class: 'tier-super' }, 'T1': { icon: 'T1', class: 'tier-t1' }, 'T2': { icon: 'T2', class: 'tier-t2' }, 'T3': { icon: 'T3', class: 'tier-t3' } };
        const axisL = { 
            'Influencer (Etkileyiciler)': { x: 'Dijital Eri≈üim', y: 'Engagement Pot.', s: 'Hacim' }, 
            'Gatekeepers (Kapƒ± Bek√ßileri)': { x: 'Eri≈üilebilirlik', y: 'Etki G√ºc√º', s: 'Kapsam' }, 
            'Decision Makers (Karar Vericiler)': { x: 'ƒ∞leti≈üim Kolaylƒ±ƒüƒ±', y: 'Karar Etkisi', s: '√ñnem' }
        };
        
        let canvas, ctx, selectedSeg = null, currentFilter = 'all', currentView = 'all';
        const pad = 55;
        
        function init() { 
            canvas = document.getElementById('quadrantCanvas'); 
            ctx = canvas.getContext('2d'); 
            resizeCanvas(); 
            window.addEventListener('resize', resizeCanvas); 
            canvas.addEventListener('mousemove', handleMouseMove); 
            canvas.addEventListener('click', handleClick); 
            canvas.addEventListener('mouseleave', () => document.getElementById('tooltip').style.display = 'none'); 
            renderSegmentList(); 
            draw(); 
        }
        
        function resizeCanvas() { const c = canvas.parentElement; canvas.width = c.clientWidth; canvas.height = c.clientHeight; draw(); }
        
        function renderSegmentList() { 
            const groups = {}; 
            segments.forEach((s, i) => { if (!groups[s.parent]) groups[s.parent] = []; groups[s.parent].push({ ...s, index: i }); }); 
            const list = document.getElementById('segmentList'); 
            list.innerHTML = ''; 
            Object.entries(groups).forEach(([parent, segs]) => { 
                const colors = parentColors[parent]; 
                const div = document.createElement('div'); 
                div.className = 'segment-group'; 
                div.innerHTML = '<div class="segment-group-header" style="border-left-color:'+colors.border+';" onclick="toggleGroup(this)"><span>'+parent.split(' ')[0]+'</span><span>‚ñº</span></div><div class="segment-items open">'+segs.map(s => '<div class="segment-item '+(selectedSeg === s.index ? 'selected' : '')+'" onclick="selectSegment('+s.index+')"><div class="tier-badge '+tierCfg[s.tier].class+'">'+tierCfg[s.tier].icon+'</div><span>'+s.name+'</span></div>').join('')+'</div>'; 
                list.appendChild(div); 
            }); 
        }
        
        function toggleGroup(h) { const i = h.nextElementSibling; i.classList.toggle('open'); h.querySelector('span:last-child').textContent = i.classList.contains('open') ? '‚ñº' : '‚ñ∂'; }
        function filterTier(tier) { currentFilter = tier; document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('active', b.dataset.tier === tier)); draw(); }
        function setView(view) { currentView = view; document.querySelectorAll('.view-btn').forEach(b => b.classList.toggle('active', b.textContent === (view === 'all' ? 'T√ºm√º' : view.split(' ')[0]))); draw(); }
        function getFiltered() { let f = segments; if (currentFilter !== 'all') { const m = { 'super': 'S√ºper', 't1': 'T1', 't2': 'T2', 't3': 'T3' }; f = f.filter(s => s.tier === m[currentFilter]); } if (currentView !== 'all') f = f.filter(s => s.parent === currentView); return f; }
        
        function draw() { 
            const w = canvas.width, h = canvas.height; 
            ctx.fillStyle = '#0a0a0f'; 
            ctx.fillRect(0, 0, w, h); 
            const cw = w - pad * 2, ch = h - pad * 2, cx = pad + cw / 2, cy = pad + ch / 2; 
            
            // Quadrant backgrounds
            ctx.fillStyle = 'rgba(255,193,7,0.03)'; ctx.fillRect(pad, pad, cw / 2, ch / 2);
            ctx.fillStyle = 'rgba(16,185,129,0.05)'; ctx.fillRect(cx, pad, cw / 2, ch / 2);
            ctx.fillStyle = 'rgba(239,68,68,0.03)'; ctx.fillRect(pad, cy, cw / 2, ch / 2);
            ctx.fillStyle = 'rgba(0,212,255,0.03)'; ctx.fillRect(cx, cy, cw / 2, ch / 2);
            
            // Grid
            ctx.strokeStyle = 'rgba(255,255,255,0.04)'; ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) { 
                ctx.beginPath(); ctx.moveTo(pad + (cw / 10) * i, pad); ctx.lineTo(pad + (cw / 10) * i, h - pad); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(pad, pad + (ch / 10) * i); ctx.lineTo(w - pad, pad + (ch / 10) * i); ctx.stroke();
            }
            
            // Axes
            ctx.strokeStyle = 'rgba(255,255,255,0.15)'; ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(cx, pad); ctx.lineTo(cx, h - pad); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(pad, cy); ctx.lineTo(w - pad, cy); ctx.stroke();
            
            // Labels
            ctx.font = '10px Sora'; ctx.fillStyle = 'rgba(255,255,255,0.4)'; ctx.textAlign = 'center';
            ctx.fillText('D√º≈ü√ºk Eri≈üim & Y√ºksek Deƒüer', pad + cw / 4, pad + 16);
            ctx.fillText('Y√ºksek Eri≈üim & Y√ºksek Deƒüer', cx + cw / 4, pad + 16);
            ctx.fillText('D√º≈ü√ºk Eri≈üim & D√º≈ü√ºk Deƒüer', pad + cw / 4, h - pad - 8);
            ctx.fillText('Y√ºksek Eri≈üim & D√º≈ü√ºk Deƒüer', cx + cw / 4, h - pad - 8);
            
            // Segments
            const filtered = getFiltered();
            filtered.forEach(seg => { 
                const ri = segments.indexOf(seg), x = pad + (seg.x / 100) * cw, y = pad + ((100 - seg.y) / 100) * ch, size = (seg.size / 100) * 24 + 8, colors = parentColors[seg.parent];
                if (selectedSeg === ri) { ctx.beginPath(); ctx.arc(x, y, size + 6, 0, Math.PI * 2); ctx.fillStyle = colors.border + '40'; ctx.fill(); }
                ctx.beginPath(); ctx.arc(x, y, size, 0, Math.PI * 2); ctx.fillStyle = colors.bg; ctx.fill();
                ctx.strokeStyle = colors.border; ctx.lineWidth = selectedSeg === ri ? 3 : 2; ctx.stroke();
                ctx.fillStyle = tierCfg[seg.tier].class === 'tier-super' ? '#ffd700' : '#fff';
                ctx.font = 'bold ' + (size > 18 ? 10 : 8) + 'px Space Mono'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
                ctx.fillText(tierCfg[seg.tier].icon, x, y);
            });
        }
        
        function handleMouseMove(e) { 
            const rect = canvas.getBoundingClientRect(), mx = e.clientX - rect.left, my = e.clientY - rect.top, cw = canvas.width - pad * 2, ch = canvas.height - pad * 2;
            let found = null;
            getFiltered().forEach(seg => { 
                const x = pad + (seg.x / 100) * cw, y = pad + ((100 - seg.y) / 100) * ch, size = (seg.size / 100) * 24 + 8;
                if (Math.sqrt((mx - x) ** 2 + (my - y) ** 2) < size) found = seg;
            });
            const tt = document.getElementById('tooltip');
            if (found) { 
                canvas.style.cursor = 'pointer';
                const l = axisL[found.parent];
                tt.innerHTML = '<div style="font-weight:600;">'+found.name+'</div><div style="color:var(--text-secondary);font-size:10px;margin:4px 0;">'+found.parent+'</div><div style="font-size:10px;">'+l.x+': <b style="color:var(--accent-enerjisa);">'+found.x+'</b> | '+l.y+': <b style="color:var(--accent-enerjisa);">'+found.y+'</b></div>';
                tt.style.display = 'block'; tt.style.left = (e.clientX + 14) + 'px'; tt.style.top = (e.clientY + 14) + 'px';
            } else { canvas.style.cursor = 'default'; tt.style.display = 'none'; }
        }
        
        function handleClick(e) { 
            const rect = canvas.getBoundingClientRect(), mx = e.clientX - rect.left, my = e.clientY - rect.top, cw = canvas.width - pad * 2, ch = canvas.height - pad * 2;
            getFiltered().forEach((seg, fi) => { 
                const ri = segments.indexOf(seg), x = pad + (seg.x / 100) * cw, y = pad + ((100 - seg.y) / 100) * ch, size = (seg.size / 100) * 24 + 8;
                if (Math.sqrt((mx - x) ** 2 + (my - y) ** 2) < size) selectSegment(ri);
            });
        }
        
        function selectSegment(idx) { 
            selectedSeg = idx; 
            const seg = segments[idx], l = axisL[seg.parent];
            document.getElementById('emptyState').style.display = 'none';
            document.getElementById('detailPanel').style.display = 'block';
            document.getElementById('detailTier').textContent = tierCfg[seg.tier].icon;
            document.getElementById('detailTier').className = 'tier-badge ' + tierCfg[seg.tier].class;
            document.getElementById('detailName').textContent = seg.name;
            document.getElementById('detailParent').textContent = seg.parent;
            document.getElementById('metricX').textContent = seg.x;
            document.getElementById('metricXLabel').textContent = l.x;
            document.getElementById('metricY').textContent = seg.y;
            document.getElementById('metricYLabel').textContent = l.y;
            document.getElementById('metricSize').textContent = seg.size;
            document.getElementById('metricSizeLabel').textContent = l.s;
            document.getElementById('metricTier').textContent = seg.tier;
            
            const strat = strategyData[seg.name] || defaultStrategy;
            document.getElementById('strategyTitle').textContent = strat.title;
            document.getElementById('strategyText').textContent = strat.text;
            document.getElementById('strategyReason').textContent = strat.reason;
            document.getElementById('strategyTags').innerHTML = strat.tags.map(t => '<span class="strategy-tag">' + t + '</span>').join('');
            
            const t = targetT[seg.parent];
            if (t && t.reach) { 
                const platforms = ['meta', 'youtube', 'tiktok', 'linkedin', 'dv360'];
                document.getElementById('reachBars').innerHTML = platforms.map(p => '<div class="reach-item"><span class="reach-platform">' + p.charAt(0).toUpperCase() + p.slice(1) + '</span><div class="reach-bar-wrap"><div class="reach-bar ' + p + '" style="width:' + t.reach[p] + '%"></div></div><span class="reach-value">' + t.reach[p] + '%</span></div>').join('');
            }
            
            document.getElementById('bottomPanel').classList.add('active');
            document.getElementById('bottomSegName').textContent = seg.name;
            document.getElementById('bottomSegParent').textContent = seg.parent;
            updateBhtPanel(seg.parent);
            updateTargetingPanel(seg.parent);
            renderSegmentList();
            draw();
        }
        
        function updateBhtPanel(parent) { 
            const rec = segBhtRec[parent] || [];
            let awImp = 0, coImp = 0, cvImp = 0;
            ['awareness', 'consideration', 'conversion'].forEach(cat => { 
                const el = document.getElementById(cat === 'awareness' ? 'awQuestions' : cat === 'consideration' ? 'coQuestions' : 'cvQuestions');
                el.innerHTML = bhtQ[cat].map(q => { 
                    const isRec = rec.includes(q.id);
                    if (isRec) { if (cat === 'awareness') awImp += q.impact; else if (cat === 'consideration') coImp += q.impact; else cvImp += q.impact; }
                    return '<div class="bht-question-item ' + (isRec ? 'recommended' : '') + '">' + q.text + '</div>';
                }).join('');
            });
            document.getElementById('awImpact').textContent = '+' + awImp + '%';
            document.getElementById('coImpact').textContent = '+' + coImp + '%';
            document.getElementById('cvImpact').textContent = '+' + cvImp + '%';
        }
        
        function updateTargetingPanel(parent) { 
            const t = targetT[parent]; if (!t) return;
            ['meta', 'linkedin', 'tiktok', 'youtube', 'dv360'].forEach(plat => { 
                const el = document.getElementById(plat + 'Targeting');
                el.innerHTML = (t[plat] || []).map(r => '<div class="targeting-row"><span class="targeting-type">' + r.type + '</span><span class="targeting-value">' + r.target + '<span class="bht-mini ' + r.bht + '">' + r.bht.toUpperCase() + '</span></span></div>').join('');
            });
            document.getElementById('lifestyleTargeting').innerHTML = (t.lifestyle || []).map(l => '<div class="extra-item"><div class="extra-item-icon lifestyle"></div><span>' + l + '</span></div>').join('');
            document.getElementById('affinityTargeting').innerHTML = (t.affinity || []).map(a => '<div class="extra-item"><div class="extra-item-icon affinity"></div><span>' + a + '</span></div>').join('');
            document.getElementById('inmarketTargeting').innerHTML = (t.inmarket || []).map(i => '<div class="extra-item"><div class="extra-item-icon inmarket"></div><span>' + i + '</span></div>').join('');
        }
        
        function exportPNG() { const link = document.createElement('a'); link.download = 'enerjisa-30yil-quadrant.png'; link.href = canvas.toDataURL('image/png'); link.click(); }
        function closeBottomPanel() { document.getElementById('bottomPanel').classList.remove('active'); selectedSeg = null; renderSegmentList(); draw(); }
        
        function exportExcel() { 
            let html = '<html><head><meta charset="UTF-8"></head><body><table border="1"><tr><th>Segment</th><th>Kategori</th><th>Eri≈üilebilirlik</th><th>Deƒüer</th><th>Hacim</th><th>√ñncelik</th><th>Strateji</th></tr>';
            segments.forEach(s => { 
                const strat = strategyData[s.name] || defaultStrategy;
                html += '<tr><td>' + s.name + '</td><td>' + s.parent + '</td><td>' + s.x + '</td><td>' + s.y + '</td><td>' + s.size + '</td><td>' + s.tier + '</td><td>' + strat.title + '</td></tr>';
            });
            html += '</table></body></html>';
            const blob = new Blob([html], { type: 'application/vnd.ms-excel' });
            const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = 'enerjisa-30yil-segments.xls'; link.click();
        }
        
        function exportStrategy() {
            let report = '# Enerjisa 30. Yƒ±l - Segment Strateji Raporu\n\n';
            report += '## Genel Bakƒ±≈ü\n';
            report += 'Toplam Segment: ' + segments.length + '\n\n';
            
            const groups = {};
            segments.forEach(s => { if (!groups[s.parent]) groups[s.parent] = []; groups[s.parent].push(s); });
            
            Object.entries(groups).forEach(([parent, segs]) => {
                report += '## ' + parent + '\n\n';
                segs.forEach(s => {
                    const strat = strategyData[s.name] || defaultStrategy;
                    report += '### ' + s.name + ' (' + s.tier + ')\n';
                    report += '**Strateji:** ' + strat.title + '\n';
                    report += strat.text + '\n';
                    report += '_' + strat.reason + '_\n';
                    report += 'Tags: ' + strat.tags.join(', ') + '\n\n';
                });
            });
            
            const blob = new Blob([report], { type: 'text/markdown' });
            const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = 'enerjisa-30yil-strateji-raporu.md'; link.click();
        }
        
        init();
    </script>
</body>
</html>
