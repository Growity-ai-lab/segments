<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A.T.L.A.S Quadrant | Growity AI Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&family=Sora:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --accent-blue: #00d4ff;
            --accent-purple: #7c3aed;
            --accent-orange: #ff6b35;
            --accent-green: #10b981;
            --accent-yellow: #f59e0b;
            --accent-pink: #ec4899;
            --accent-red: #ef4444;
            --text-primary: #f0f0f5;
            --text-secondary: #8888a0;
            --border-color: #2a2a3a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }
        
        body {
            font-family: 'Sora', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        /* Header */
        .header {
            background: rgba(10,10,15,0.9);
            border-bottom: 1px solid var(--border-color);
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(20px);
        }

        .header-left { display: flex; align-items: center; gap: 20px; }

        .back-btn {
            padding: 10px 18px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 13px;
            font-family: 'Sora', sans-serif;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-btn:hover {
            border-color: var(--accent-blue);
            background: rgba(0,212,255,0.1);
        }

        .logo { display: flex; align-items: center; gap: 14px; }
        .logo-icon { width: 48px; height: 48px; }
        .logo-icon svg { width: 100%; height: 100%; }
        /* Globe animations */
        .globe-outer { animation: rotateRing 20s linear infinite; transform-origin: center; }
        .globe-mid { animation: rotateRing 15s linear infinite reverse; transform-origin: center; }
        .globe-inner { animation: pulseRing 3s ease-in-out infinite; transform-origin: center; }
        .globe-lat { animation: wobbleLat 8s ease-in-out infinite; transform-origin: center; }
        .globe-long { animation: wobbleLong 10s ease-in-out infinite; transform-origin: center; }
        .globe-center { animation: centerPulse 2s ease-in-out infinite; transform-origin: center; }
        .cardinal-point:nth-child(1) { animation: orbitTop 8s ease-in-out infinite; transform-origin: 24px 24px; }
        .cardinal-point:nth-child(2) { animation: orbitRight 10s ease-in-out infinite; transform-origin: 24px 24px; }
        .cardinal-point:nth-child(3) { animation: orbitBottom 7s ease-in-out infinite; transform-origin: 24px 24px; }
        .cardinal-point:nth-child(4) { animation: orbitLeft 9s ease-in-out infinite; transform-origin: 24px 24px; }
        .seg-1 { animation: floatSeg1 6s ease-in-out infinite; }
        .seg-2 { animation: floatSeg2 7s ease-in-out infinite; }
        .seg-3 { animation: floatSeg3 5s ease-in-out infinite; }
        .seg-4 { animation: floatSeg4 8s ease-in-out infinite; }
        @keyframes rotateRing { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulseRing { 0%, 100% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.08); opacity: 0.8; } }
        @keyframes wobbleLat { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.15); } }
        @keyframes wobbleLong { 0%, 100% { transform: scaleX(1); } 50% { transform: scaleX(1.15); } }
        @keyframes centerPulse { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 4px rgba(0,212,255,0.6)); } 50% { transform: scale(1.2); filter: drop-shadow(0 0 10px rgba(124,58,237,0.8)); } }
        @keyframes orbitTop { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(6px, 4px) scale(1.15); } }
        @keyframes orbitRight { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-5px, 6px) scale(1.1); } }
        @keyframes orbitBottom { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-6px, -4px) scale(1.2); } }
        @keyframes orbitLeft { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(5px, -6px) scale(1.1); } }
        @keyframes floatSeg1 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-3px, 2px) scale(1.2); } }
        @keyframes floatSeg2 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(3px, -3px) scale(1.15); } }
        @keyframes floatSeg3 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(4px, 2px) scale(1.25); } }
        @keyframes floatSeg4 { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(-2px, -4px) scale(1.1); } }
        .logo-text { display: flex; flex-direction: column; }
        .logo-text .brand { font-family: 'Outfit', sans-serif; font-size: 22px; font-weight: 800; letter-spacing: 2px; background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1.2; }
        .logo-text .tagline { font-size: 8px; font-family: 'Space Mono', monospace; color: var(--text-secondary); letter-spacing: 0.3px; margin-top: 2px; }
        .logo-text .powered-by { display: flex; align-items: center; gap: 5px; font-size: 8px; color: var(--text-secondary); margin-top: 4px; }
        .logo-text .powered-by .growity-name { font-weight: 600; background: linear-gradient(90deg, #E91E8C, #7B2D8E); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .header-actions { display: flex; gap: 10px; align-items: center; }

        .po-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            background: rgba(227,30,36,0.15);
            border: 1px solid rgba(227,30,36,0.4);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            gap: 8px;
            color: #e31e24;
            font-size: 12px;
            font-weight: 600;
        }

        .po-btn:hover {
            background: rgba(227,30,36,0.25);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(227,30,36,0.2);
        }

        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
            font-family: 'Sora', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-secondary {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            border-color: var(--accent-blue);
            background: rgba(0,212,255,0.1);
        }

        /* Main Layout */
        .main-container {
            display: flex;
            height: calc(100vh - 65px);
            position: relative;
            z-index: 1;
        }

        /* Left Panel */
        .left-panel {
            width: 320px;
            background: rgba(26,26,36,0.8);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }

        .panel-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .panel-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            font-family: 'Space Mono', monospace;
        }

        .segment-list {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .segment-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 8px;
            border: 2px solid transparent;
            background: var(--bg-card);
            transition: all 0.3s;
        }

        .segment-item:hover {
            background: rgba(0,212,255,0.05);
            border-color: rgba(0,212,255,0.2);
        }

        .segment-item.selected {
            background: rgba(0,212,255,0.1);
            border-color: var(--accent-blue);
        }

        .segment-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex-shrink: 0;
            box-shadow: 0 0 10px currentColor;
        }

        .segment-info { 
            flex: 1; 
            min-width: 0; 
            overflow: hidden;
        }

        .segment-name {
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 140px;
        }

        .segment-parent {
            font-size: 10px;
            color: var(--text-secondary);
            font-family: 'Space Mono', monospace;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .segment-reach {
            font-size: 12px;
            color: var(--accent-blue);
            font-weight: 600;
            font-family: 'Space Mono', monospace;
        }

        .segment-actions { display: flex; gap: 6px; }

        .segment-action-btn {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .segment-action-btn:hover {
            background: rgba(0,212,255,0.1);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .segment-action-btn.delete:hover {
            background: rgba(239,68,68,0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* Center Panel */
        .center-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: rgba(26,26,36,0.6);
            border-bottom: 1px solid var(--border-color);
            padding: 0 20px;
        }

        .tab {
            padding: 16px 28px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-family: 'Sora', sans-serif;
        }

        .tab:hover {
            color: var(--text-primary);
            background: rgba(0,212,255,0.05);
        }

        .tab.active {
            color: var(--accent-blue);
            border-bottom-color: var(--accent-blue);
        }

        /* Tab Content */
        .tab-content {
            flex: 1;
            display: none;
            padding: 24px;
            overflow: auto;
        }

        .tab-content.active { display: block; }

        /* Quadrant */
        .quadrant-container {
            display: flex;
            gap: 24px;
            height: 100%;
        }

        .quadrant-canvas-wrap {
            flex: 1;
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            position: relative;
            min-height: 500px;
        }

        #quadrantCanvas { width: 100%; height: 100%; }

        /* Quadrant Details */
        .quadrant-details {
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .detail-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 18px;
        }

        .detail-card-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 14px;
            font-family: 'Space Mono', monospace;
            letter-spacing: 1px;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .metric-input {
            width: 90px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--accent-blue);
            font-size: 14px;
            font-weight: 600;
            font-family: 'Space Mono', monospace;
            text-align: right;
        }

        .metric-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(0,212,255,0.1);
        }

        /* Venn Diagram */
        .venn-container {
            display: flex;
            gap: 24px;
            height: 100%;
        }

        .venn-canvas-wrap {
            flex: 1;
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #vennCanvas { max-width: 100%; max-height: 100%; }

        /* Venn Controls */
        .venn-controls {
            width: 340px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .venn-segment-select {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 18px;
        }

        .venn-select-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 14px;
            font-family: 'Space Mono', monospace;
            letter-spacing: 1px;
        }

        .venn-slot {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-bottom: 10px;
            border: 2px dashed var(--border-color);
            transition: all 0.3s;
        }

        .venn-slot.filled {
            border-style: solid;
            border-color: rgba(0,212,255,0.3);
        }

        .venn-slot-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }

        .venn-slot-name {
            flex: 1;
            font-size: 13px;
        }

        .venn-slot-remove {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            border: none;
            background: rgba(239,68,68,0.2);
            color: var(--accent-red);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .venn-slot-remove:hover {
            background: rgba(239,68,68,0.3);
        }

        .venn-slot-placeholder {
            color: var(--text-secondary);
            font-style: italic;
            font-size: 12px;
        }

        /* Intersection Results */
        .intersection-results {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 18px;
            flex: 1;
            overflow-y: auto;
        }

        .intersection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .intersection-label {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .intersection-dots {
            display: flex;
            gap: 4px;
        }

        .intersection-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .intersection-value {
            font-size: 15px;
            font-weight: 700;
            color: var(--accent-blue);
            font-family: 'Space Mono', monospace;
        }

        .intersection-pct {
            font-size: 11px;
            color: var(--text-secondary);
            margin-left: 6px;
        }

        /* Comparison Table */
        .comparison-container { height: 100%; overflow: auto; }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .comparison-table th {
            background: var(--bg-card);
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-size: 11px;
            font-family: 'Space Mono', monospace;
            position: sticky;
            top: 0;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table tr:hover {
            background: rgba(0,212,255,0.03);
        }

        .comparison-bar {
            height: 10px;
            background: var(--bg-secondary);
            border-radius: 5px;
            overflow: hidden;
        }

        .comparison-bar-fill {
            height: 100%;
            border-radius: 5px;
        }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: rgba(26,26,36,0.98);
            padding: 16px 20px;
            border-radius: 14px;
            font-size: 13px;
            pointer-events: none;
            z-index: 1000;
            display: none;
            max-width: 300px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        /* Legend */
        .legend {
            padding: 16px 20px;
            background: rgba(26,26,36,0.6);
            border-top: 1px solid var(--border-color);
        }

        .legend-title {
            font-size: 10px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
        }

        .legend-items {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
            text-align: center;
        }

        .empty-icon {
            font-size: 56px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 18px;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .empty-desc {
            font-size: 13px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-blue); }
        
        /* === UI/UX PRO MAX ENHANCEMENTS === */
        
        /* Cursor pointer for all interactive elements */
        button, a, [onclick], [role="button"], .clickable, .back-btn, .po-btn, .btn, .tab, .segment-item, .segment-action-btn, .venn-slot, .venn-slot-remove { cursor: pointer; }
        
        /* Smooth transitions */
        button, a, input, .btn, .tab, .segment-item, .segment-action-btn, .venn-slot, .back-btn, .po-btn { transition: all 0.2s ease-out; }
        
        /* Focus states for keyboard navigation */
        :focus { outline: none; }
        :focus-visible { outline: 2px solid var(--accent-blue); outline-offset: 2px; }
        button:focus-visible, a:focus-visible, input:focus-visible, [tabindex]:focus-visible { box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.25); }
        
        /* Reduced motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
            .bg-grid { display: none; }
        }
        
        /* Prevent text selection on UI elements */
        button, .btn, .tab, .segment-item, .back-btn, .po-btn { user-select: none; -webkit-user-select: none; }
        
        /* Improved hover states */
        .back-btn:hover, .po-btn:hover, .btn:hover, .tab:hover { transform: translateY(-1px); }
        .btn:active, .tab:active, .back-btn:active { transform: translateY(0); }
        
        /* Icon styles */
        .icon { display: inline-flex; align-items: center; justify-content: center; width: 1em; height: 1em; vertical-align: middle; }
        .icon svg { width: 100%; height: 100%; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
        
        /* Canvas accessibility */
        canvas[role="img"] { outline: none; }
        canvas[role="img"]:focus-visible { box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.25); }
        
        /* === TOAST NOTIFICATION SYSTEM === */
        .toast-container { position: fixed; bottom: 24px; right: 24px; z-index: 10000; display: flex; flex-direction: column; gap: 12px; pointer-events: none; }
        .toast { pointer-events: auto; padding: 14px 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; display: flex; align-items: center; gap: 12px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4); transform: translateX(120%); opacity: 0; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); max-width: 380px; }
        .toast.visible { transform: translateX(0); opacity: 1; }
        .toast.hiding { transform: translateX(120%); opacity: 0; }
        .toast-success { border-left: 4px solid var(--accent-green); }
        .toast-error { border-left: 4px solid #ef4444; }
        .toast-info { border-left: 4px solid var(--accent-blue); }
        .toast-warning { border-left: 4px solid var(--accent-yellow); }
        .toast-icon { width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .toast-success .toast-icon { background: rgba(16, 185, 129, 0.2); color: var(--accent-green); }
        .toast-error .toast-icon { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
        .toast-info .toast-icon { background: rgba(0, 212, 255, 0.2); color: var(--accent-blue); }
        .toast-warning .toast-icon { background: rgba(245, 158, 11, 0.2); color: var(--accent-yellow); }
        .toast-content { flex: 1; }
        .toast-message { font-size: 12px; color: var(--text-secondary); }
        .toast-close { background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 4px; border-radius: 4px; transition: all 0.2s; }
        .toast-close:hover { background: rgba(255,255,255,0.1); color: var(--text-primary); }
        .toast-progress { position: absolute; bottom: 0; left: 0; height: 3px; background: var(--accent-green); border-radius: 0 0 0 12px; animation: toast-progress linear forwards; }
        .toast-error .toast-progress { background: #ef4444; }
        .toast-info .toast-progress { background: var(--accent-blue); }
        @keyframes toast-progress { from { width: 100%; } to { width: 0%; } }
        
        /* === LOADING BUTTON STATES === */
        .btn-loading { position: relative; pointer-events: none; opacity: 0.7; }
        .btn-loading .btn-text { opacity: 0; }
        .btn-loading .btn-spinner { display: flex; }
        .btn-spinner { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .btn-spinner svg { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        button:disabled, .btn:disabled { opacity: 0.6; cursor: not-allowed; pointer-events: none; }
    </style>
</head>
<body>
    <div class="bg-grid"></div>

    <header class="header">
        <div class="header-left">
            <a href="segment-page.html" class="back-btn">‚Üê Segment Se√ßimi</a>
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 48 48" fill="none">
                        <!-- Rings -->
                        <circle class="globe-outer" cx="24" cy="24" r="21" stroke="url(#atlasGradQ)" stroke-width="1.5" fill="none"/>
                        <circle class="globe-mid" cx="24" cy="24" r="14" stroke="url(#atlasGradQ)" stroke-width="1" fill="none" opacity="0.7"/>
                        <circle class="globe-inner" cx="24" cy="24" r="8" stroke="url(#atlasGradQ)" stroke-width="1" fill="none" opacity="0.5"/>
                        <!-- Lat/Long -->
                        <ellipse class="globe-lat" cx="24" cy="24" rx="21" ry="8" stroke="url(#atlasGradQ)" stroke-width="0.75" fill="none" opacity="0.4"/>
                        <ellipse class="globe-long" cx="24" cy="24" rx="8" ry="21" stroke="url(#atlasGradQ)" stroke-width="0.75" fill="none" opacity="0.4"/>
                        <!-- Center -->
                        <circle class="globe-center" cx="24" cy="24" r="2.5" fill="url(#atlasGradQ)"/>
                        <!-- Cardinal points -->
                        <g class="cardinal-points">
                            <circle class="cardinal-point" cx="24" cy="3" r="2" fill="#00d4ff"/>
                            <circle class="cardinal-point" cx="45" cy="24" r="2" fill="#7c3aed"/>
                            <circle class="cardinal-point" cx="24" cy="45" r="2" fill="#14b8a6"/>
                            <circle class="cardinal-point" cx="3" cy="24" r="2" fill="#00d4ff"/>
                        </g>
                        <!-- Segment points -->
                        <circle class="seg-1" cx="36" cy="10" r="1.5" fill="#ec4899"/>
                        <circle class="seg-2" cx="40" cy="32" r="1.5" fill="#f59e0b"/>
                        <circle class="seg-3" cx="12" cy="38" r="1.5" fill="#10b981"/>
                        <circle class="seg-4" cx="8" cy="16" r="1.5" fill="#8b5cf6"/>
                        <defs><linearGradient id="atlasGradQ" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#00d4ff"/><stop offset="50%" stop-color="#7c3aed"/><stop offset="100%" stop-color="#14b8a6"/></linearGradient></defs>
                    </svg>
                </div>
                <div class="logo-text">
                    <span class="brand">A.T.L.A.S</span>
                    <span class="tagline">Audience Targeting & Layered Analysis System</span>
                    <div class="powered-by">
                        <span>powered by</span>
                        <svg viewBox="0 0 20 20" width="10" height="10"><circle cx="7" cy="10" r="5" fill="none" stroke="#E91E8C" stroke-width="1.5"/><circle cx="13" cy="10" r="5" fill="none" stroke="#7B2D8E" stroke-width="1.5"/></svg>
                        <span class="growity-name">Growity AI Studio</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-actions">
            <a href="po-segmentasyon.html" class="po-btn" aria-label="Petrol Ofisi Premium Market">
                <span class="icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></span> PO Premium Market
            </a>
            <button class="btn btn-secondary" onclick="exportPNG()" aria-label="PNG olarak indir"><span class="icon"><svg viewBox="0 0 24 24"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg></span> PNG</button>
            <button class="btn btn-secondary" onclick="exportExcel()" aria-label="Excel olarak indir"><span class="icon"><svg viewBox="0 0 24 24"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M8 13h2"/><path d="M14 13h2"/><path d="M8 17h2"/><path d="M14 17h2"/></svg></span> Excel</button>
        </div>
    </header>

    <div class="main-container">
        <div class="left-panel">
            <div class="panel-header">
                <div class="panel-title">Se√ßili Segmentler</div>
                <div class="panel-subtitle" id="segmentCount">0 segment</div>
            </div>
            <div class="segment-list" id="segmentList"></div>
            <div class="legend">
                <div class="legend-title">Quadrant Konumu</div>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-color" style="background:var(--accent-green);"></div>Y√ºksek √ñncelik</div>
                    <div class="legend-item"><div class="legend-color" style="background:var(--accent-blue);"></div>Orta</div>
                    <div class="legend-item"><div class="legend-color" style="background:var(--accent-orange);"></div>D√º≈ü√ºk</div>
                </div>
            </div>
        </div>

        <div class="center-panel">
            <div class="tabs">
                <div class="tab active" data-tab="quadrant" onclick="switchTab('quadrant')" role="tab" tabindex="0" aria-selected="true"><span class="icon"><svg viewBox="0 0 24 24"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg></span> Quadrant</div>
                <div class="tab" data-tab="venn" onclick="switchTab('venn')" role="tab" tabindex="0" aria-selected="false"><span class="icon"><svg viewBox="0 0 24 24"><circle cx="9" cy="12" r="6"/><circle cx="15" cy="12" r="6"/></svg></span> Kesi≈üim Analizi</div>
                <div class="tab" data-tab="comparison" onclick="switchTab('comparison')" role="tab" tabindex="0" aria-selected="false"><span class="icon"><svg viewBox="0 0 24 24"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></svg></span> Kar≈üƒ±la≈ütƒ±rma</div>
            </div>

            <div class="tab-content active" id="tab-quadrant">
                <div class="quadrant-container">
                    <div class="quadrant-canvas-wrap">
                        <canvas id="quadrantCanvas" role="img" aria-label="Segment konumlandƒ±rma quadrant grafiƒüi - eri≈üilebilirlik ve deƒüer potansiyeli" tabindex="0"></canvas>
                    </div>
                    <div class="quadrant-details">
                        <div class="detail-card">
                            <div class="detail-card-title">Se√ßili Segment</div>
                            <div id="selectedSegmentInfo">
                                <p style="color:var(--text-secondary);font-size:12px;text-align:center;">D√ºzenlemek i√ßin bir segment se√ßin</p>
                            </div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-card-title">Eksen A√ßƒ±klamalarƒ±</div>
                            <div style="font-size:12px;color:var(--text-secondary);line-height:1.7;">
                                <p><strong style="color:var(--accent-blue);">X - Eri≈üilebilirlik:</strong> Hedefe ula≈üma kolaylƒ±ƒüƒ±, platform varlƒ±ƒüƒ±</p>
                                <p style="margin-top:10px;"><strong style="color:var(--accent-purple);">Y - Deƒüer Potansiyeli:</strong> M√º≈üteri deƒüeri, LTV potansiyeli</p>
                                <p style="margin-top:10px;"><strong style="color:var(--accent-green);">Boyut:</strong> Eri≈üim hacmi</p>
                            </div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-card-title">Quadrant Rehberi</div>
                            <div style="font-size:11px;color:var(--text-secondary);line-height:1.8;">
                                <p>üéØ <strong style="color:#10b981;">Hemen Harekete Ge√ß:</strong> Deƒüerli + Eri≈üilebilir ‚Üí √ñncelikli hedef</p>
                                <p>üîß <strong style="color:#ff6b35;">Geli≈ütir & B√ºy√ºt:</strong> Deƒüerli ama zor ‚Üí Yatƒ±rƒ±m yap</p>
                                <p>üì¢ <strong style="color:#00d4ff;">Geni≈ü Kitleye Ula≈ü:</strong> Kolay ama d√º≈ü√ºk deƒüer ‚Üí Awareness</p>
                                <p>‚è∏Ô∏è <strong style="color:#ef4444;">Beklet:</strong> Ne kolay ne deƒüerli ‚Üí ≈ûimdilik bƒ±rak</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="tab-venn">
                <div class="venn-container">
                    <div class="venn-canvas-wrap">
                        <canvas id="vennCanvas" width="600" height="500"></canvas>
                    </div>
                    <div class="venn-controls">
                        <div class="venn-segment-select">
                            <div class="venn-select-title">Kesi≈üim i√ßin Segment Se√ß (Max 4)</div>
                            <div id="vennSlots"></div>
                            <p style="font-size:11px;color:var(--text-secondary);margin-top:10px;">Sol panelden segmentleri s√ºr√ºkleyin veya + butonuyla ekleyin</p>
                        </div>
                        <div class="intersection-results">
                            <div class="venn-select-title">Kesi≈üim Sonu√ßlarƒ±</div>
                            <div id="intersectionResults">
                                <p style="color:var(--text-secondary);font-size:12px;text-align:center;">En az 2 segment se√ßin</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="tab-comparison">
                <div class="comparison-container">
                    <table class="comparison-table" id="comparisonTable">
                        <thead>
                            <tr>
                                <th>Segment</th>
                                <th>Ana Kategori</th>
                                <th>Eri≈üim Hacmi</th>
                                <th>Eri≈üilebilirlik</th>
                                <th>Deƒüer Potansiyeli</th>
                                <th>üìò Meta</th>
                                <th>üéµ TikTok</th>
                                <th>√ñncelik Skoru</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        const segmentColors = [
            '#00d4ff', '#7c3aed', '#ec4899', '#10b981', '#f59e0b', 
            '#ef4444', '#06b6d4', '#8b5cf6', '#f43f5e', '#22c55e',
            '#eab308', '#ff6b35', '#14b8a6', '#a855f7', '#f97316'
        ];

        let segments = [];
        let selectedSegmentId = null;
        let vennSegments = [];
        let quadrantCanvas, quadrantCtx, vennCanvas, vennCtx;
        const padding = 70;

        function init() {
            const savedSegments = localStorage.getItem('selectedSegments');
            if (!savedSegments) {
                alert('Segment se√ßimi bulunamadƒ±.');
                window.location.href = '../';
                return;
            }

            const rawSegments = JSON.parse(savedSegments);

            // Meta mapping'leri localStorage'dan y√ºkle
            const metaMappings = localStorage.getItem('metaSegmentMappings');
            let metaMap = {};
            if (metaMappings) {
                try { metaMap = JSON.parse(metaMappings); } catch(e) { console.log('Meta mapping parse error'); }
            }
            
            // TikTok mapping'leri localStorage'dan y√ºkle
            const tiktokMappings = localStorage.getItem('tiktokSegmentMappings');
            let tiktokMap = {};
            if (tiktokMappings) {
                try { tiktokMap = JSON.parse(tiktokMappings); } catch(e) { console.log('TikTok mapping parse error'); }
            }
            
            segments = rawSegments.map((seg, index) => ({
                ...seg,
                color: segmentColors[index % segmentColors.length],
                x: Math.floor(Math.random() * 40) + 30,
                y: Math.floor(Math.random() * 40) + 30,
                reachNum: seg.reach,
                metaInterest: metaMap[seg.id] ? metaMap[seg.id].interests[0] : null,
                metaReachFormatted: metaMap[seg.id] ? metaMap[seg.id].interests[0].name : null,
                tiktokInterest: tiktokMap[seg.id] ? tiktokMap[seg.id].interests[0] : null,
                tiktokReachFormatted: tiktokMap[seg.id] ? tiktokMap[seg.id].interests[0].name : null
            }));

            quadrantCanvas = document.getElementById('quadrantCanvas');
            quadrantCtx = quadrantCanvas.getContext('2d');
            vennCanvas = document.getElementById('vennCanvas');
            vennCtx = vennCanvas.getContext('2d');

            resizeQuadrantCanvas();
            window.addEventListener('resize', resizeQuadrantCanvas);
            quadrantCanvas.addEventListener('mousemove', handleQuadrantMouseMove);
            quadrantCanvas.addEventListener('click', handleQuadrantClick);
            quadrantCanvas.addEventListener('mouseleave', () => document.getElementById('tooltip').style.display = 'none');

            renderSegmentList();
            renderVennSlots();
            drawQuadrant();
            drawVenn();
            renderComparison();
        }

        function resizeQuadrantCanvas() {
            const container = quadrantCanvas.parentElement;
            quadrantCanvas.width = container.clientWidth;
            quadrantCanvas.height = container.clientHeight;
            drawQuadrant();
        }

        function renderSegmentList() {
            const list = document.getElementById('segmentList');
            document.getElementById('segmentCount').textContent = `${segments.length} segment`;

            list.innerHTML = segments.map((seg, idx) => `
                <div class="segment-item ${selectedSegmentId === seg.id ? 'selected' : ''}" 
                     data-id="${seg.id}" 
                     onclick="selectSegment('${seg.id}')"
                     draggable="true"
                     ondragstart="dragStart(event, '${seg.id}')">
                    <div class="segment-color" style="background:${seg.color};color:${seg.color};"></div>
                    <div class="segment-info">
                        <div class="segment-name">${seg.name}</div>
                        <div class="segment-parent">${seg.parent}</div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 2px; flex-shrink: 0; min-width: 70px;">
                        <div class="segment-reach">${formatReach(seg.reachNum)}</div>
                        ${seg.metaReachFormatted ? `<div style="font-size: 9px; color: #60a5fa; font-family: 'Space Mono', monospace; white-space: nowrap; max-width: 80px; overflow: hidden; text-overflow: ellipsis;" title="${seg.metaReachFormatted}">üìä ${seg.metaReachFormatted}</div>` : ''}
                    </div>
                    <div class="segment-actions">
                        <button class="segment-action-btn" onclick="event.stopPropagation(); addToVenn('${seg.id}')" title="Venn'e ekle">+</button>
                        <button class="segment-action-btn delete" onclick="event.stopPropagation(); removeSegment('${seg.id}')" title="Sil">√ó</button>
                    </div>
                </div>
            `).join('');
        }

        function selectSegment(id) {
            selectedSegmentId = id;
            const seg = segments.find(s => s.id === id);
            renderSegmentList();
            drawQuadrant();

            if (seg) {
                // Platform √∂nerileri (segment tipine g√∂re)
                const platformRecommendations = getPlatformRecommendations(seg);
                
                // Hedefleme stratejisi
                const targetingStrategy = getTargetingStrategy(seg);
                
                // Meta reach bilgisi
                const metaSection = seg.metaReachFormatted ? `
                    <div style="background: linear-gradient(135deg, rgba(24,119,242,0.15), rgba(24,119,242,0.05)); border: 1px solid rgba(24,119,242,0.3); border-radius: 10px; padding: 12px; margin-bottom: 16px;">
                        <div style="font-size: 10px; color: #60a5fa; font-weight: 600; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                            üìä META AUDIENCE
                            <span style="width: 6px; height: 6px; background: #34d399; border-radius: 50%; animation: pulse 2s infinite;"></span>
                        </div>
                        <div style="font-size: 18px; font-weight: 700; color: #60a5fa; font-family: 'Space Mono', monospace;">${seg.metaReachFormatted}</div>
                        <div style="font-size: 10px; color: var(--text-secondary); margin-top: 4px;">
                            Interest: ${seg.metaInterest?.name || 'Atanmamƒ±≈ü'}
                        </div>
                    </div>
                ` : `
                    <div style="background: rgba(255,255,255,0.05); border: 1px dashed var(--border-color); border-radius: 10px; padding: 12px; margin-bottom: 16px; text-align: center;">
                        <div style="font-size: 11px; color: var(--text-secondary);">üìä Meta verisi yok</div>
                        <div style="font-size: 10px; color: var(--text-secondary); margin-top: 4px;">K√ºt√ºphanede interest atayƒ±n</div>
                    </div>
                `;
                
                document.getElementById('selectedSegmentInfo').innerHTML = `
                    <div style="display:flex;align-items:center;gap:10px;margin-bottom:16px;">
                        <div style="width:20px;height:20px;border-radius:50%;background:${seg.color};box-shadow:0 0 15px ${seg.color};"></div>
                        <div style="font-size:14px;font-weight:600;">${seg.name}</div>
                    </div>
                    
                    ${metaSection}
                    
                    <div class="metric-row">
                        <span class="metric-label">Eri≈üilebilirlik (X)</span>
                        <input type="number" class="metric-input" value="${seg.x}" min="0" max="100" onchange="updateSegmentMetric('${seg.id}', 'x', this.value)">
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Deƒüer Potansiyeli (Y)</span>
                        <input type="number" class="metric-input" value="${seg.y}" min="0" max="100" onchange="updateSegmentMetric('${seg.id}', 'y', this.value)">
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">TDY Eri≈üim</span>
                        <input type="text" class="metric-input" value="${formatReach(seg.reachNum)}" onchange="updateSegmentMetric('${seg.id}', 'reach', this.value)">
                    </div>
                    
                    <!-- Platform √ñnerileri -->
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                        <div style="font-size: 10px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 10px; font-family: 'Space Mono', monospace; letter-spacing: 1px;">üì° Platform √ñnerileri</div>
                        ${platformRecommendations}
                    </div>
                    
                    <!-- Hedefleme Stratejisi -->
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                        <div style="font-size: 10px; font-weight: 600; color: var(--accent-green); text-transform: uppercase; margin-bottom: 10px; font-family: 'Space Mono', monospace; letter-spacing: 1px;">üéØ Hedefleme Stratejisi</div>
                        ${targetingStrategy}
                    </div>
                `;
            }
        }
        
        
        // Otomatik hedefleme stratejisi √ºret
        function generateAutoStrategy(seg) {
            const categoryStrategies = {
                'lifestyle': {
                    meta: ['Lifestyle', 'Hobbies and interests', 'Entertainment'],
                    google: ['Affinity: Lifestyle', 'In-market: Consumer goods'],
                    tip: 'Ya≈üam tarzƒ± odaklƒ± i√ßeriklerle hedefleyin'
                },
                'demografik': {
                    meta: ['Demographics', 'Life events', 'Family status'],
                    google: ['Demographics targeting', 'Life events'],
                    tip: 'Demografik filtrelerle daraltƒ±n'
                },
                'davranis': {
                    meta: ['Purchase behavior', 'Online activity', 'Device usage'],
                    google: ['In-market audiences', 'Custom intent'],
                    tip: 'Davranƒ±≈üsal sinyallerle hedefleyin'
                },
                'b2c': {
                    meta: ['Consumer interests', 'Shopping behavior', 'Brand affinity'],
                    google: ['In-market: Retail', 'Affinity: Shoppers'],
                    tip: 'T√ºketici odaklƒ± kampanyalar i√ßin idealdir'
                },
                'b2b': {
                    meta: ['Job titles', 'Industries', 'Company size'],
                    google: ['Business services', 'B2B decision makers'],
                    linkedin: ['Job function', 'Seniority', 'Industry'],
                    tip: 'LinkedIn ve profesyonel aƒülar √∂ncelikli'
                }
            };
            
            // Segment ID'den kategori tahmin et
            let category = 'lifestyle';
            if (seg.id.startsWith('inf-') || seg.id.startsWith('tk-') || seg.id.startsWith('bs-')) category = 'b2c';
            else if (seg.id.startsWith('gk-') || seg.id.startsWith('dm-')) category = 'b2b';
            else if (seg.id.startsWith('al-') || seg.id.startsWith('gl-')) category = 'demografik';
            else if (seg.id.startsWith('dj-') || seg.id.startsWith('fn-') || seg.id.startsWith('md-') || seg.id.startsWith('ot-')) category = 'davranis';
            
            const strat = categoryStrategies[category] || categoryStrategies['lifestyle'];
            
            let html = `
                <div style="background: linear-gradient(135deg, rgba(124,58,237,0.1), rgba(124,58,237,0.02)); border: 1px solid rgba(124,58,237,0.2); border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                    <div style="font-size: 10px; font-weight: 600; color: #a78bfa; margin-bottom: 8px;">ü§ñ OTOMATƒ∞K √ñNERƒ∞</div>
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 10px;">${strat.tip}</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(24,119,242,0.1), rgba(24,119,242,0.02)); border: 1px solid rgba(24,119,242,0.2); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                    <div style="font-size: 10px; font-weight: 600; color: #60a5fa; margin-bottom: 6px;">üìò META √ñNERƒ∞LERƒ∞</div>
                    <div style="font-size: 10px; color: #34d399;">${strat.meta.join(', ')}</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(234,67,53,0.1), rgba(66,133,244,0.1)); border: 1px solid rgba(234,67,53,0.2); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                    <div style="font-size: 10px; font-weight: 600; color: #ea4335; margin-bottom: 6px;">üîç GOOGLE √ñNERƒ∞LERƒ∞</div>
                    <div style="font-size: 10px; color: #60a5fa;">${strat.google.join(', ')}</div>
                </div>`;
            
            if (strat.linkedin) {
                html += `
                <div style="background: linear-gradient(135deg, rgba(10,102,194,0.1), rgba(10,102,194,0.02)); border: 1px solid rgba(10,102,194,0.2); border-radius: 8px; padding: 10px;">
                    <div style="font-size: 10px; font-weight: 600; color: #0a66c2; margin-bottom: 6px;">üíº LINKEDIN √ñNERƒ∞LERƒ∞</div>
                    <div style="font-size: 10px; color: #34d399;">${strat.linkedin.join(', ')}</div>
                </div>`;
            }
            
            return html;
        }
        
        // Hedefleme stratejisi fonksiyonu
        function getTargetingStrategy(seg) {
            const strategies = {
                // ========== ENERJƒ∞SA - INFLUENCER (B2C) ==========
                'inf-1': {
                    title: 'Hane Halklarƒ± - Kesintisiz Enerji',
                    meta: {
                        demographics: ['25-54 ya≈ü', 'Ev sahipleri', 'Evli / √áocuklu'],
                        interests: ['Home improvement', 'Home appliances', 'Family', 'Home & Garden'],
                        behaviors: ['Engaged shoppers', 'Homeowners'],
                        locations: ['Enerjisa hizmet b√∂lgeleri', '≈ûehir merkezleri'],
                        exclusions: ['Kiracƒ±lar', '18-24 ya≈ü']
                    },
                    google: {
                        audiences: ['Homeowners', 'Home Services', 'Utilities'],
                        keywords: ['elektrik kesintisi', 'enerji ≈üirketi', 'fatura √∂deme', 'elektrik aboneliƒüi'],
                        placements: ['Emlak siteleri', 'Haber siteleri']
                    },
                    tiktok: {
                        age: ['25-34', '35-44', '45-54'],
                        interests: ['Home & Garden', 'Home Improvement', 'Family', 'Life Hacks'],
                        behaviors: ['Engaged with Home content', 'Video viewers 6+ sec'],
                        hashtags: ['#evdekorasyonu', '#tasarruf', '#pratikbilgiler', '#annelik'],
                        content_type: 'Enerji tasarrufu ipu√ßlarƒ±, Fatura okuma rehberi, Pratik ev bilgileri'
                    },
                    custom: 'CRM: Mevcut m√º≈üteri listesi, Y√ºksek fatura tutarlƒ± segmentler'
                },
                'inf-2': {
                    title: 'Dijital M√º≈üteri',
                    meta: {
                        demographics: ['22-45 ya≈ü', '√úniversite mezunu', '≈ûehirli'],
                        interests: ['Technology', 'Mobile apps', 'Online shopping', 'Digital lifestyle'],
                        behaviors: ['Early technology adopters', 'Smartphone users', 'Online banking'],
                        locations: ['B√ºy√ºk≈üehirler', 'ƒ∞stanbul, Ankara, ƒ∞zmir'],
                        exclusions: ['55+ ya≈ü', 'Kƒ±rsal b√∂lgeler']
                    },
                    google: {
                        audiences: ['Technophiles', 'Mobile app enthusiasts'],
                        keywords: ['online fatura', 'mobil uygulama', 'dijital fatura', 'e-fatura'],
                        placements: ['Tech bloglarƒ±', 'Fintech siteleri']
                    },
                    tiktok: {
                        age: ['18-24', '25-34', '35-44'],
                        interests: ['Technology', 'Apps & Software', 'Digital Life', 'Fintech'],
                        behaviors: ['App installers', 'Tech content engagers'],
                        hashtags: ['#teknoloji', '#mobiluygulama', '#dijitalhayat', '#fintech'],
                        content_type: 'App tanƒ±tƒ±m videolarƒ±, Dijital i≈ülem tutorial, QR kod kullanƒ±mƒ±'
                    },
                    custom: 'CRM: E-fatura kullananlar, App indirmi≈ü ama aktif deƒüil'
                },
                'inf-3': {
                    title: 'Mobil Kullanƒ±cƒ±lar',
                    meta: {
                        demographics: ['18-35 ya≈ü', '√ñƒürenci + Gen√ß profesyonel'],
                        interests: ['Mobile games', 'Social media', 'Apps', 'Streaming services'],
                        behaviors: ['Mobile-first users', 'App installers', 'Heavy mobile data users'],
                        locations: ['T√ºm T√ºrkiye', '√úniversite ≈üehirleri √∂ncelikli'],
                        exclusions: ['50+ ya≈ü', 'D√º≈ü√ºk mobil kullanƒ±m']
                    },
                    google: {
                        audiences: ['Mobile app enthusiasts', 'Young adults'],
                        keywords: ['enerji uygulamasƒ±', 'fatura takip app', 'elektrik app'],
                        placements: ['App store ads', 'Mobile game aƒülarƒ±']
                    },
                    tiktok: {
                        age: ['18-24', '25-34'],
                        interests: ['Gaming', 'Entertainment', 'Apps', 'Social Media'],
                        behaviors: ['Heavy app users', 'Mobile gamers', 'Daily TikTok users'],
                        hashtags: ['#app', '#mobiloyun', '#g√ºnl√ºkhayat', '#√∂ƒürenci'],
                        content_type: 'App install CTA, 15sn hƒ±zlƒ± demo, Influencer UGC',
                        spark_ads: 'Gen√ß influencer i≈übirlikleri, √ñƒürenci i√ßerik √ºreticileri'
                    },
                    custom: 'UAC kampanyalarƒ±: App install optimize, Deep linking'
                },
                'inf-4': {
                    title: 'K√º√ß√ºk ƒ∞≈ületmeler',
                    meta: {
                        demographics: ['28-55 ya≈ü', 'ƒ∞≈ületme sahibi', 'Karar verici'],
                        interests: ['Small business', 'Entrepreneurship', 'Business finance', 'B2B services'],
                        behaviors: ['Small business owners', 'Business decision makers'],
                        job_titles: ['Owner', 'CEO', 'Founder', 'Managing Director'],
                        locations: ['Organize sanayi b√∂lgeleri', 'ƒ∞≈ü merkezleri'],
                        exclusions: ['Kurumsal √ßalƒ±≈üanlar', '√ñƒürenciler']
                    },
                    google: {
                        audiences: ['Small business owners', 'In-market: Business services'],
                        keywords: ['i≈ületme elektrik faturasƒ±', 'ticari enerji', 'KOBƒ∞ elektrik', 'i≈üyeri abonelik'],
                        placements: ['ƒ∞≈ü d√ºnyasƒ± siteleri', 'KOBƒ∞ portallarƒ±']
                    },
                    tiktok: {
                        age: ['25-34', '35-44', '45-54'],
                        interests: ['Business & Finance', 'Entrepreneurship', 'Small Business'],
                        behaviors: ['Business content viewers', 'B2B engagers'],
                        hashtags: ['#i≈ületme', '#giri≈üimci', '#kobim', '#esnaf', '#i≈ühayatƒ±'],
                        content_type: 'Maliyet tasarrufu ipu√ßlarƒ±, ƒ∞≈ületme ba≈üarƒ± hikayeleri, Fatura y√∂netimi'
                    },
                    linkedin: {
                        job_titles: ['Owner', 'Founder', 'General Manager', 'CFO'],
                        company_size: ['1-10', '11-50', '51-200'],
                        industries: ['Retail', 'Manufacturing', 'Food & Beverage', 'Services']
                    },
                    custom: 'CRM: Ticari m√º≈üteriler, Y√ºksek t√ºketim KOBƒ∞\'ler'
                },
                'inf-5': {
                    title: 'Enerjisa √áalƒ±≈üanlarƒ±',
                    meta: {
                        demographics: ['T√ºm ya≈ülar', 'Enerjisa √ßalƒ±≈üanlarƒ±'],
                        employer: ['Enerjisa', 'Enerjisa Enerji', 'Enerjisa √úretim'],
                        locations: ['Ofis lokasyonlarƒ±', 'Saha b√∂lgeleri'],
                        exclusions: ['Dƒ±≈ü payda≈ülar']
                    },
                    linkedin: {
                        current_company: ['Enerjisa'],
                        seniority: ['All levels']
                    },
                    custom: 'Internal: √áalƒ±≈üan e-posta listesi, Intranet, MS Teams'
                },
                'inf-6': {
                    title: 'G√ºven Odaklƒ± T√ºketiciler',
                    meta: {
                        demographics: ['30-60 ya≈ü', 'Orta-√ºst gelir'],
                        interests: ['News', 'Finance', 'Consumer rights', 'Quality products'],
                        behaviors: ['Engaged with news content', 'Research before purchase'],
                        locations: ['B√ºy√ºk≈üehirler'],
                        exclusions: ['D√ºrt√ºsel alƒ±≈üveri≈ü segmenti']
                    },
                    google: {
                        audiences: ['In-market: Utilities', 'Affinity: News junkies'],
                        keywords: ['enerjisa g√ºvenilir mi', 'elektrik ≈üirketi ≈üikayet', 'en iyi enerji ≈üirketi'],
                        placements: ['Haber siteleri', '≈ûikayet siteleri (remarketing)']
                    },
                    custom: 'CRM: ≈ûikayet ge√ßmi≈üi olanlar (win-back), NPS d√º≈ü√ºk m√º≈üteriler'
                },
                
                // ========== ENERJƒ∞SA - GATEKEEPERS (B2B) ==========
                'gk-1': {
                    title: 'Yerel Y√∂netimler',
                    meta: {
                        demographics: ['35-60 ya≈ü', 'Kamu √ßalƒ±≈üanƒ±'],
                        job_titles: ['Belediye ba≈ükanƒ±', 'Meclis √ºyesi', 'M√ºd√ºr'],
                        interests: ['Public administration', 'Local government', 'Urban planning'],
                        locations: ['Enerjisa hizmet b√∂lgeleri'],
                        exclusions: ['Merkezi h√ºk√ºmet']
                    },
                    linkedin: {
                        job_titles: ['Mayor', 'City Council', 'Municipal Director', 'Public Affairs'],
                        industries: ['Government Administration'],
                        seniority: ['Director', 'VP', 'CXO']
                    },
                    custom: 'Direct outreach: Belediye protokol listeleri, Resmi yazƒ±≈üma'
                },
                'gk-2': {
                    title: 'Muhtarlar',
                    meta: {
                        demographics: ['35-65 ya≈ü', 'Mahalle muhtarƒ±'],
                        interests: ['Local community', 'Neighborhood', 'Community service'],
                        locations: ['Mahalle bazlƒ± geo-targeting'],
                        exclusions: ['B√ºy√ºk≈üehir dƒ±≈üƒ±']
                    },
                    custom: 'Direct: Muhtarlƒ±k dernekleri, WhatsApp gruplarƒ±, Mahalle toplantƒ±larƒ±, SMS kampanyalarƒ±'
                },
                'gk-3': {
                    title: 'STK ve Sivil Toplum',
                    meta: {
                        demographics: ['25-55 ya≈ü'],
                        interests: ['Sustainability', 'Environment', 'Social causes', 'NGO'],
                        behaviors: ['Charity donors', 'Volunteers'],
                        locations: ['B√ºy√ºk≈üehirler'],
                        exclusions: ['Ticari kurulu≈ülar']
                    },
                    linkedin: {
                        job_titles: ['Executive Director', 'Program Manager', 'Sustainability Manager'],
                        industries: ['Non-profit', 'Environmental Services'],
                        company_size: ['11-50', '51-200']
                    },
                    custom: 'Direct: STK veritabanlarƒ±, √áevre platformlarƒ±, Proje √ßaƒürƒ±larƒ±'
                },
                'gk-4': {
                    title: 'Akademik Kurumlar',
                    meta: {
                        demographics: ['30-65 ya≈ü', 'Akademisyen'],
                        interests: ['Research', 'Energy', 'Engineering', 'Sustainability'],
                        education: ['Doctorate'],
                        locations: ['√úniversite ≈üehirleri'],
                        exclusions: ['√ñƒürenciler']
                    },
                    linkedin: {
                        job_titles: ['Professor', 'Researcher', 'Department Head', 'Dean'],
                        industries: ['Higher Education', 'Research'],
                        skills: ['Energy', 'Electrical Engineering', 'Sustainability']
                    },
                    custom: 'Direct: √úniversite enerji b√∂l√ºmleri, Ara≈ütƒ±rma merkezleri, Akademik konferanslar'
                },
                'gk-5': {
                    title: 'S√ºrd√ºr√ºlebilirlik Partnerleri',
                    meta: {
                        demographics: ['28-50 ya≈ü'],
                        interests: ['Green energy', 'Sustainability', 'ESG', 'Climate change'],
                        behaviors: ['Business decision makers'],
                        locations: ['ƒ∞stanbul', 'Ankara', 'ƒ∞zmir'],
                        exclusions: ['Consumer segment']
                    },
                    linkedin: {
                        job_titles: ['Sustainability Director', 'ESG Manager', 'Environmental Manager', 'CSR Manager'],
                        industries: ['Environmental Services', 'Renewables', 'Consulting'],
                        company_size: ['51-200', '201-500', '501-1000', '1000+']
                    },
                    custom: 'Direct: S√ºrd√ºr√ºlebilirlik platformlarƒ±, ESG raporlama firmalarƒ±, Ye≈üil enerji fuarlarƒ±'
                },
                
                // ========== ENERJƒ∞SA - DECISION MAKERS (B2B) ==========
                'dm-1': {
                    title: 'Devlet Kurumlarƒ±',
                    meta: {
                        demographics: ['40-60 ya≈ü', '√úst d√ºzey b√ºrokrat'],
                        employer: ['EPDK', 'Enerji Bakanlƒ±ƒüƒ±', 'TEDA≈û'],
                        locations: ['Ankara'],
                        exclusions: ['Alt kademe']
                    },
                    linkedin: {
                        job_titles: ['Director General', 'Undersecretary', 'Board Member'],
                        current_company: ['EPDK', 'Ministry of Energy'],
                        seniority: ['CXO', 'VP', 'Director']
                    },
                    custom: 'Direct: Resmi kanallar, Sekt√∂r toplantƒ±larƒ±, Protokol ziyaretleri'
                },
                'dm-2': {
                    title: 'Reg√ºlat√∂rler',
                    meta: {
                        demographics: ['35-60 ya≈ü', 'D√ºzenleyici kurum √ßalƒ±≈üanƒ±'],
                        interests: ['Energy regulation', 'Policy', 'Compliance'],
                        locations: ['Ankara'],
                        exclusions: ['√ñzel sekt√∂r']
                    },
                    linkedin: {
                        job_titles: ['Regulator', 'Policy Analyst', 'Compliance Officer', 'Legal Counsel'],
                        industries: ['Government', 'Utilities'],
                        seniority: ['Director', 'Manager', 'Senior']
                    },
                    custom: 'Direct: Sekt√∂r konferanslarƒ±, Teknik toplantƒ±lar, Resmi g√∂r√º≈üler'
                },
                'dm-3': {
                    title: 'Kurumsal Yatƒ±rƒ±mcƒ±lar',
                    meta: {
                        demographics: ['30-55 ya≈ü', 'Finans profesyoneli'],
                        interests: ['Investment', 'ESG investing', 'Energy sector', 'Stock market'],
                        behaviors: ['High net worth investors'],
                        locations: ['ƒ∞stanbul', 'Londra', 'New York'],
                        exclusions: ['Retail investors']
                    },
                    linkedin: {
                        job_titles: ['Portfolio Manager', 'Investment Director', 'Fund Manager', 'ESG Analyst'],
                        industries: ['Investment Management', 'Venture Capital', 'Private Equity'],
                        company_size: ['51-200', '201-500', '1000+']
                    },
                    custom: 'Direct: Yatƒ±rƒ±mcƒ± g√ºnleri, Roadshowlar, Bloomberg Terminal, IR e-posta listesi'
                },
                'dm-4': {
                    title: 'Bireysel Yatƒ±rƒ±mcƒ±lar',
                    meta: {
                        demographics: ['25-55 ya≈ü', 'Orta-√ºst gelir'],
                        interests: ['Stock trading', 'Investment', 'Finance', 'BIST'],
                        behaviors: ['Stock traders', 'Finance app users'],
                        locations: ['B√ºy√ºk≈üehirler'],
                        exclusions: ['D√º≈ü√ºk gelir']
                    },
                    google: {
                        audiences: ['In-market: Financial services', 'Affinity: Investors'],
                        keywords: ['enerjisa hisse', 'ENJSA hisse analiz', 'enerji hisseleri', 'temett√º hisseleri'],
                        placements: ['Finans siteleri', 'Yatƒ±rƒ±m forumlarƒ±']
                    },
                    custom: 'Twitter: #BIST100, Finans influencer\'larƒ±, Yatƒ±rƒ±m topluluklarƒ±'
                },
                'dm-5': {
                    title: 'Stratejik ƒ∞≈ü Ortaklarƒ±',
                    meta: {
                        demographics: ['35-55 ya≈ü', 'C-level'],
                        interests: ['Business development', 'Partnerships', 'Energy industry'],
                        behaviors: ['Business decision makers'],
                        locations: ['ƒ∞stanbul', 'Ankara'],
                        exclusions: ['SME']
                    },
                    linkedin: {
                        job_titles: ['CEO', 'COO', 'Business Development Director', 'VP Partnerships'],
                        industries: ['Utilities', 'Energy', 'Technology', 'Construction'],
                        company_size: ['501-1000', '1000+'],
                        seniority: ['CXO', 'VP', 'Director']
                    },
                    custom: 'Direct: Sekt√∂r zirvesi, B2B etkinlikler, CEO toplantƒ±larƒ±, Referans aƒüƒ±'
                },

                // ========== YA≈ûAM TARZI ==========
                'yt-1': {
                    title: 'Trendsetter √ñnc√ºler',
                    meta: {
                        demographics: ['22-38 ya≈ü', '√úniversite mezunu', '≈ûehirli'],
                        interests: ['Technology', 'Innovation', 'Startups', 'Gadgets', 'Early adopters'],
                        behaviors: ['Early technology adopters', 'Online shoppers'],
                        locations: ['ƒ∞stanbul', 'Ankara', 'ƒ∞zmir'],
                        exclusions: ['45+ ya≈ü', 'Kƒ±rsal']
                    },
                    google: {
                        audiences: ['Technophiles', 'Early Adopters'],
                        keywords: ['yeni teknoloji', 'inovasyon', 'startup'],
                        placements: ['Tech bloglarƒ±', 'Startup siteleri']
                    },
                    tiktok: {
                        age: ['18-24', '25-34'],
                        interests: ['Technology', 'Science & Education', 'Gaming', 'Digital Creators'],
                        behaviors: ['Trend followers', 'Early content engagers', 'Viral content sharers'],
                        hashtags: ['#teknoloji', '#yenilik', '#gadget', '#ke≈üfet', '#trend'],
                        content_type: '√úr√ºn unboxing, Tech hack\'ler, Yeni uygulama tanƒ±tƒ±mlarƒ±, Behind the scenes',
                        spark_ads: 'Tech influencer\'lar, Gadget reviewer\'lar'
                    },
                    custom: 'Influencer: Tech YouTuber\'lar, Product Hunt TR'
                },
                'yt-3': {
                    title: 'Deneyim Avcƒ±larƒ±',
                    meta: {
                        demographics: ['25-45 ya≈ü', 'Orta-√ºst gelir'],
                        interests: ['Travel', 'Adventure', 'Outdoor activities', 'Photography', 'Experiences'],
                        behaviors: ['Frequent travelers', 'Experience seekers'],
                        locations: ['B√ºy√ºk≈üehirler'],
                        exclusions: ['Evde kalmayƒ± sevenler']
                    },
                    google: {
                        audiences: ['Travel enthusiasts', 'Adventure seekers'],
                        keywords: ['tatil', 'gezi', 'macera', 'ke≈üfet'],
                        placements: ['Seyahat bloglarƒ±', 'Booking siteleri']
                    },
                    tiktok: {
                        age: ['18-24', '25-34', '35-44'],
                        interests: ['Travel', 'Outdoor & Nature', 'Food & Drink', 'Sports & Fitness'],
                        behaviors: ['Travel content viewers', 'Location taggers', 'Experience sharers'],
                        hashtags: ['#gezi', '#tatil', '#ke≈üfet', '#seyahat', '#t√ºrkiye', '#macera'],
                        content_type: 'Destinasyon tanƒ±tƒ±mƒ±, Hidden gem\'ler, Yemek deneyimleri, Vlog tarzƒ±',
                        spark_ads: 'Seyahat influencer\'larƒ±, Gezi blogger\'larƒ±'
                    },
                    custom: 'Influencer: Travel blogger\'lar, Gezi YouTuber\'larƒ±'
                },

                // ========== OTOMOBƒ∞L ==========
                'ot-1': {
                    title: 'Premium Ara√ß Sahipleri',
                    meta: {
                        demographics: ['30-55 ya≈ü', 'Y√ºksek gelir'],
                        interests: ['Luxury vehicles', 'BMW', 'Mercedes-Benz', 'Audi', 'Luxury lifestyle'],
                        behaviors: ['Luxury car owners', 'High-end shoppers'],
                        locations: ['ƒ∞stanbul Anadolu/Avrupa prestij b√∂lgeleri'],
                        exclusions: ['B√ºt√ße odaklƒ±']
                    },
                    google: {
                        audiences: ['Luxury vehicle shoppers', 'High income'],
                        keywords: ['premium ara√ß', 'l√ºks otomobil', 'BMW', 'Mercedes'],
                        placements: ['Otomobil dergileri', 'L√ºks ya≈üam siteleri']
                    },
                    tiktok: {
                        age: ['25-34', '35-44', '45-54'],
                        interests: ['Vehicles & Transportation', 'Luxury', 'Lifestyle'],
                        behaviors: ['Car content viewers', 'Luxury brand engagers'],
                        hashtags: ['#araba', '#l√ºks', '#bmw', '#mercedes', '#audi', '#otomobil'],
                        content_type: 'Ara√ß tanƒ±tƒ±m, Test s√ºr√º≈ü√º, Detailing, L√ºks ya≈üam',
                        spark_ads: 'Otomobil influencer\'larƒ±, L√ºks ya≈üam i√ßerik √ºreticileri'
                    },
                    custom: 'CRM: Premium akaryakƒ±t kullanƒ±cƒ±larƒ±, Y√ºksek harcama segmenti'
                },
                'ot-4': {
                    title: 'Elektrik/Hibrit ƒ∞lgili',
                    meta: {
                        demographics: ['28-50 ya≈ü', '√áevreci', 'Teknoloji meraklƒ±sƒ±'],
                        interests: ['Electric vehicles', 'Tesla', 'Sustainability', 'Green technology', 'Hybrid cars'],
                        behaviors: ['Eco-conscious', 'Early adopters'],
                        locations: ['B√ºy√ºk≈üehirler', '≈ûarj istasyonu yoƒüun b√∂lgeler'],
                        exclusions: ['Dizel tutkunu']
                    },
                    google: {
                        audiences: ['Electric vehicle shoppers', 'Green living enthusiasts'],
                        keywords: ['elektrikli ara√ß', '≈üarj istasyonu', 'Tesla', 'hibrit'],
                        placements: ['EV siteleri', '√áevre bloglarƒ±']
                    },
                    tiktok: {
                        age: ['25-34', '35-44'],
                        interests: ['Vehicles & Transportation', 'Technology', 'Sustainability', 'Science'],
                        behaviors: ['EV content viewers', 'Tech early adopters', 'Eco-conscious users'],
                        hashtags: ['#elektrikli', '#ev', '#tesla', '#ye≈üilenerji', '#≈üarj', '#s√ºrd√ºr√ºlebilir'],
                        content_type: 'EV kar≈üƒ±la≈ütƒ±rma, ≈ûarj deneyimi, Maliyet analizi, √áevre bilinci',
                        spark_ads: 'EV sahipleri, S√ºrd√ºr√ºlebilirlik influencer\'larƒ±'
                    },
                    custom: 'CRM: ≈ûarj istasyonu kullanƒ±cƒ±larƒ±, EV test s√ºr√º≈ü√º katƒ±lƒ±mcƒ±larƒ±'
                }
            };
            
            const strategy = strategies[seg.id];
            
            if (!strategy) {
                return generateAutoStrategy(seg);
            }
            
            let html = '';
            
            // Meta/Facebook hedefleme
            if (strategy.meta) {
                html += `
                    <div style="background: linear-gradient(135deg, rgba(24,119,242,0.1), rgba(24,119,242,0.02)); border: 1px solid rgba(24,119,242,0.2); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                        <div style="font-size: 10px; font-weight: 600; color: #60a5fa; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
                            <span>üìò</span> META / FACEBOOK / INSTAGRAM
                        </div>
                        ${strategy.meta.demographics ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Demografi:</span><div style="font-size: 10px; color: var(--text-primary);">${strategy.meta.demographics.join(' ‚Ä¢ ')}</div></div>` : ''}
                        ${strategy.meta.interests ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">ƒ∞lgi Alanlarƒ±:</span><div style="font-size: 10px; color: #34d399;">${strategy.meta.interests.join(', ')}</div></div>` : ''}
                        ${strategy.meta.behaviors ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Davranƒ±≈ülar:</span><div style="font-size: 10px; color: #f59e0b;">${strategy.meta.behaviors.join(', ')}</div></div>` : ''}
                        ${strategy.meta.job_titles ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">ƒ∞≈ü Unvanlarƒ±:</span><div style="font-size: 10px; color: #a78bfa;">${strategy.meta.job_titles.join(', ')}</div></div>` : ''}
                        ${strategy.meta.locations ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Lokasyon:</span><div style="font-size: 10px; color: var(--text-primary);">${strategy.meta.locations.join(', ')}</div></div>` : ''}
                        ${strategy.meta.exclusions ? `<div><span style="font-size: 9px; color: var(--text-secondary);">Hari√ß Tut:</span><div style="font-size: 10px; color: #f87171;">${strategy.meta.exclusions.join(', ')}</div></div>` : ''}
                    </div>
                `;
            }
            
            // Google hedefleme
            if (strategy.google) {
                html += `
                    <div style="background: linear-gradient(135deg, rgba(234,67,53,0.1), rgba(66,133,244,0.1)); border: 1px solid rgba(234,67,53,0.2); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                        <div style="font-size: 10px; font-weight: 600; color: #ea4335; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
                            <span>üîç</span> GOOGLE ADS
                        </div>
                        ${strategy.google.audiences ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Kitleler:</span><div style="font-size: 10px; color: #34d399;">${strategy.google.audiences.join(', ')}</div></div>` : ''}
                        ${strategy.google.keywords ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Anahtar Kelimeler:</span><div style="font-size: 10px; color: #60a5fa;">${strategy.google.keywords.join(', ')}</div></div>` : ''}
                        ${strategy.google.placements ? `<div><span style="font-size: 9px; color: var(--text-secondary);">Yerle≈üimler:</span><div style="font-size: 10px; color: #f59e0b;">${strategy.google.placements.join(', ')}</div></div>` : ''}
                    </div>
                `;
            }
            
            // LinkedIn hedefleme
            if (strategy.linkedin) {
                html += `
                    <div style="background: linear-gradient(135deg, rgba(10,102,194,0.1), rgba(10,102,194,0.02)); border: 1px solid rgba(10,102,194,0.2); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                        <div style="font-size: 10px; font-weight: 600; color: #0a66c2; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
                            <span>üíº</span> LINKEDIN
                        </div>
                        ${strategy.linkedin.job_titles ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">ƒ∞≈ü Unvanlarƒ±:</span><div style="font-size: 10px; color: #34d399;">${strategy.linkedin.job_titles.join(', ')}</div></div>` : ''}
                        ${strategy.linkedin.industries ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Sekt√∂rler:</span><div style="font-size: 10px; color: #60a5fa;">${strategy.linkedin.industries.join(', ')}</div></div>` : ''}
                        ${strategy.linkedin.company_size ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">≈ûirket B√ºy√ºkl√ºƒü√º:</span><div style="font-size: 10px; color: #f59e0b;">${strategy.linkedin.company_size.join(', ')} √ßalƒ±≈üan</div></div>` : ''}
                        ${strategy.linkedin.seniority ? `<div><span style="font-size: 9px; color: var(--text-secondary);">Kƒ±dem:</span><div style="font-size: 10px; color: #a78bfa;">${strategy.linkedin.seniority.join(', ')}</div></div>` : ''}
                    </div>
                `;
            }
            
            // TikTok hedefleme
            if (strategy.tiktok) {
                html += `
                    <div style="background: linear-gradient(135deg, rgba(0,0,0,0.1), rgba(238,29,82,0.1)); border: 1px solid rgba(238,29,82,0.3); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                        <div style="font-size: 10px; font-weight: 600; color: #ee1d52; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
                            <span>üéµ</span> TIKTOK ADS
                        </div>
                        ${strategy.tiktok.age ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Ya≈ü Aralƒ±ƒüƒ±:</span><div style="font-size: 10px; color: var(--text-primary);">${strategy.tiktok.age.join(', ')}</div></div>` : ''}
                        ${strategy.tiktok.interests ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">ƒ∞lgi Alanlarƒ±:</span><div style="font-size: 10px; color: #34d399;">${strategy.tiktok.interests.join(', ')}</div></div>` : ''}
                        ${strategy.tiktok.behaviors ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Davranƒ±≈ülar:</span><div style="font-size: 10px; color: #f59e0b;">${strategy.tiktok.behaviors.join(', ')}</div></div>` : ''}
                        ${strategy.tiktok.hashtags ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">Hashtag'ler:</span><div style="font-size: 10px; color: #ee1d52;">${strategy.tiktok.hashtags.join(' ')}</div></div>` : ''}
                        ${strategy.tiktok.content_type ? `<div style="margin-bottom: 6px;"><span style="font-size: 9px; color: var(--text-secondary);">ƒ∞√ßerik T√ºr√º:</span><div style="font-size: 10px; color: #60a5fa;">${strategy.tiktok.content_type}</div></div>` : ''}
                        ${strategy.tiktok.spark_ads ? `<div><span style="font-size: 9px; color: var(--text-secondary);">Spark Ads:</span><div style="font-size: 10px; color: #a78bfa;">${strategy.tiktok.spark_ads}</div></div>` : ''}
                    </div>
                `;
            }
            
            // Custom/Direct hedefleme
            if (strategy.custom) {
                html += `
                    <div style="background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(16,185,129,0.02)); border: 1px solid rgba(16,185,129,0.2); border-radius: 8px; padding: 10px;">
                        <div style="font-size: 10px; font-weight: 600; color: #10b981; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                            <span>üéØ</span> Dƒ∞REKT / √ñZEL KANALLAR
                        </div>
                        <div style="font-size: 10px; color: var(--text-primary);">${strategy.custom}</div>
                    </div>
                `;
            }
            
            return html;
        }
        
        // Platform √∂nerileri fonksiyonu
        function getPlatformRecommendations(seg) {
            // Segment kategorisine g√∂re platform √∂nerileri
            const recommendations = {
                // Ya≈üam Tarzƒ±
                'yt-1': [{ platform: 'Instagram', score: 92, reason: 'Trend i√ßerikler' }, { platform: 'YouTube', score: 85, reason: 'Tech reviews' }, { platform: 'TikTok', score: 78, reason: 'Viral trends' }],
                'yt-2': [{ platform: 'LinkedIn', score: 95, reason: 'Profesyonel aƒü' }, { platform: 'Instagram', score: 82, reason: 'Lifestyle' }, { platform: 'YouTube', score: 75, reason: 'Business content' }],
                'yt-3': [{ platform: 'Instagram', score: 90, reason: 'Travel content' }, { platform: 'YouTube', score: 88, reason: 'Vlog & deneyim' }, { platform: 'TikTok', score: 82, reason: 'Kƒ±sa geziler' }],
                'yt-4': [{ platform: 'Instagram', score: 94, reason: 'Wellness influencer' }, { platform: 'YouTube', score: 86, reason: 'Fitness video' }, { platform: 'Pinterest', score: 78, reason: 'Saƒülƒ±klƒ± ya≈üam' }],
                
                // T√ºketim
                'tk-1': [{ platform: 'Instagram', score: 92, reason: 'L√ºks markalar' }, { platform: 'YouTube', score: 80, reason: '√úr√ºn incelemeleri' }, { platform: 'Pinterest', score: 75, reason: '√úr√ºn ke≈üfi' }],
                'tk-2': [{ platform: 'Facebook', score: 88, reason: 'Kampanya gruplarƒ±' }, { platform: 'Instagram', score: 82, reason: 'ƒ∞ndirim payla≈üƒ±mlarƒ±' }, { platform: 'YouTube', score: 70, reason: 'Kar≈üƒ±la≈ütƒ±rma' }],
                'tk-3': [{ platform: 'Instagram', score: 95, reason: 'Shopping feature' }, { platform: 'TikTok', score: 90, reason: 'Viral √ºr√ºnler' }, { platform: 'Facebook', score: 72, reason: 'Marketplace' }],
                'tk-4': [{ platform: 'YouTube', score: 92, reason: 'Detaylƒ± inceleme' }, { platform: 'Google Search', score: 88, reason: 'Ara≈ütƒ±rma' }, { platform: 'Facebook', score: 75, reason: 'Gruplar' }],
                
                // Dijital
                'dj-1': [{ platform: 'TikTok', score: 95, reason: 'Gen-Z hub' }, { platform: 'Instagram', score: 90, reason: 'Reels' }, { platform: 'YouTube', score: 85, reason: 'Shorts' }],
                'dj-2': [{ platform: 'Instagram', score: 96, reason: 'Ana platform' }, { platform: 'TikTok', score: 92, reason: 'Aktif kullanƒ±m' }, { platform: 'YouTube', score: 80, reason: 'Video i√ßerik' }],
                'dj-3': [{ platform: 'Instagram', score: 90, reason: 'Shopping' }, { platform: 'Google Shopping', score: 88, reason: '√úr√ºn arama' }, { platform: 'YouTube', score: 78, reason: 'Unboxing' }],
                'dj-4': [{ platform: 'Facebook', score: 92, reason: 'Geleneksel platform' }, { platform: 'YouTube', score: 85, reason: 'Video izleme' }, { platform: 'TV', score: 80, reason: 'Geleneksel medya' }],
                
                // Otomobil
                'ot-1': [{ platform: 'YouTube', score: 94, reason: 'Ara√ß incelemeleri' }, { platform: 'Instagram', score: 85, reason: 'Luxury lifestyle' }, { platform: 'LinkedIn', score: 75, reason: 'Business segment' }],
                'ot-2': [{ platform: 'YouTube', score: 92, reason: 'Off-road & test' }, { platform: 'Instagram', score: 85, reason: 'Outdoor lifestyle' }, { platform: 'Facebook', score: 78, reason: 'Gruplar' }],
                'ot-3': [{ platform: 'YouTube', score: 90, reason: 'Yakƒ±t testleri' }, { platform: 'Google Search', score: 88, reason: 'Kar≈üƒ±la≈ütƒ±rma' }, { platform: 'Facebook', score: 75, reason: 'Ekonomi gruplarƒ±' }],
                'ot-4': [{ platform: 'YouTube', score: 95, reason: 'EV reviews' }, { platform: 'Instagram', score: 82, reason: 'S√ºrd√ºr√ºlebilirlik' }, { platform: 'LinkedIn', score: 78, reason: 'B2B & inovasyon' }],
                
                // ========== ENERJƒ∞SA - INFLUENCER (B2C) ==========
                'inf-1': [
                    { platform: 'Facebook', score: 94, reason: 'Hane hedefleme, 35-55 ya≈ü' },
                    { platform: 'YouTube', score: 88, reason: 'Bilgilendirici i√ßerik, g√ºven' },
                    { platform: 'Google Display', score: 85, reason: 'Retargeting, fatura hatƒ±rlatma' },
                    { platform: 'TV', score: 82, reason: 'Kesintisiz hizmet mesajƒ±' }
                ],
                'inf-2': [
                    { platform: 'Instagram', score: 92, reason: 'Dijital fatura, uygulama tanƒ±tƒ±m' },
                    { platform: 'YouTube', score: 86, reason: 'How-to videolar, fatura okuma' },
                    { platform: 'Google Search', score: 90, reason: 'Fatura sorgulama intent' },
                    { platform: 'TikTok', score: 75, reason: 'Gen√ß hane √ºyeleri' }
                ],
                'inf-3': [
                    { platform: 'Instagram', score: 95, reason: 'Mobil √∂ncelikli, app download' },
                    { platform: 'TikTok', score: 90, reason: 'Gen√ß kitle, hƒ±zlƒ± i≈ülem' },
                    { platform: 'Google UAC', score: 92, reason: 'App install kampanyalarƒ±' },
                    { platform: 'YouTube', score: 78, reason: 'App tutorial shorts' }
                ],
                'inf-4': [
                    { platform: 'LinkedIn', score: 96, reason: 'KOBƒ∞ sahipleri, B2B' },
                    { platform: 'Google Search', score: 94, reason: 'Enerji maliyeti aramasƒ±' },
                    { platform: 'Facebook', score: 85, reason: 'ƒ∞≈ületme sayfalarƒ±, gruplar' },
                    { platform: 'YouTube', score: 80, reason: 'Maliyet optimizasyonu i√ßerik' }
                ],
                'inf-5': [
                    { platform: 'LinkedIn', score: 98, reason: 'Kurumsal ileti≈üim, aidiyet' },
                    { platform: 'Internal App', score: 95, reason: '√áalƒ±≈üan uygulamasƒ±' },
                    { platform: 'Email', score: 90, reason: 'Kurumsal b√ºlten' },
                    { platform: 'Instagram', score: 70, reason: 'Employer branding' }
                ],
                'inf-6': [
                    { platform: 'YouTube', score: 92, reason: '≈ûeffaf bilgilendirme, FAQ' },
                    { platform: 'Facebook', score: 90, reason: 'Topluluk g√ºveni, yorumlar' },
                    { platform: 'Google Search', score: 88, reason: 'Bilgi arama intent' },
                    { platform: 'Twitter/X', score: 75, reason: 'Anlƒ±k m√º≈üteri hizmetleri' }
                ],
                
                // ========== ENERJƒ∞SA - GATEKEEPERS (B2B) ==========
                'gk-1': [
                    { platform: 'LinkedIn', score: 95, reason: 'Belediye yetkilileri' },
                    { platform: 'Email', score: 92, reason: 'Resmi ileti≈üim, davetler' },
                    { platform: 'Webinar', score: 88, reason: 'B√∂lgesel enerji toplantƒ±larƒ±' },
                    { platform: 'Local Press', score: 85, reason: 'Yerel basƒ±n ilanlarƒ±' }
                ],
                'gk-2': [
                    { platform: 'WhatsApp', score: 94, reason: 'Mahalle gruplarƒ±, direkt ileti≈üim' },
                    { platform: 'Facebook', score: 90, reason: 'Mahalle gruplarƒ±' },
                    { platform: 'SMS', score: 88, reason: 'Bilgilendirme mesajlarƒ±' },
                    { platform: 'Local Events', score: 85, reason: 'Mahalle toplantƒ±larƒ±' }
                ],
                'gk-3': [
                    { platform: 'LinkedIn', score: 92, reason: 'STK yetkilileri' },
                    { platform: 'Email', score: 90, reason: 'Proje teklifleri' },
                    { platform: 'Webinar', score: 88, reason: 'S√ºrd√ºr√ºlebilirlik etkinlikleri' },
                    { platform: 'Twitter/X', score: 82, reason: 'Sosyal sorumluluk payla≈üƒ±mlarƒ±' }
                ],
                'gk-4': [
                    { platform: 'LinkedIn', score: 96, reason: 'Akademisyenler, ara≈ütƒ±rmacƒ±lar' },
                    { platform: 'Academic Events', score: 94, reason: 'Konferans sponsorluklarƒ±' },
                    { platform: 'Email', score: 90, reason: 'Ara≈ütƒ±rma i≈übirlikleri' },
                    { platform: 'YouTube', score: 78, reason: 'Teknik webinarlar' }
                ],
                'gk-5': [
                    { platform: 'LinkedIn', score: 95, reason: '√áevre sekt√∂r√º profesyonelleri' },
                    { platform: 'Email', score: 92, reason: 'Partnership teklifleri' },
                    { platform: 'Industry Events', score: 90, reason: 'Ye≈üil enerji fuarlarƒ±' },
                    { platform: 'Twitter/X', score: 80, reason: 'ESG g√ºncellemeleri' }
                ],
                
                // ========== ENERJƒ∞SA - DECISION MAKERS (B2B) ==========
                'dm-1': [
                    { platform: 'Email', score: 98, reason: 'Resmi yazƒ±≈üma, raporlar' },
                    { platform: 'LinkedIn', score: 90, reason: '√úst d√ºzey baƒülantƒ±lar' },
                    { platform: 'Industry Events', score: 95, reason: 'EPDK toplantƒ±larƒ±' },
                    { platform: 'Press', score: 88, reason: 'Resmi duyurular' }
                ],
                'dm-2': [
                    { platform: 'Email', score: 96, reason: 'D√ºzenleyici raporlar' },
                    { platform: 'Industry Events', score: 94, reason: 'Sekt√∂r toplantƒ±larƒ±' },
                    { platform: 'LinkedIn', score: 88, reason: 'Profesyonel aƒü' },
                    { platform: 'Webinar', score: 82, reason: 'Teknik sunumlar' }
                ],
                'dm-3': [
                    { platform: 'LinkedIn', score: 97, reason: 'ESG fonlarƒ±, kurumsal yatƒ±rƒ±mcƒ±' },
                    { platform: 'Email', score: 94, reason: 'Yatƒ±rƒ±mcƒ± ili≈ükileri' },
                    { platform: 'Investor Events', score: 92, reason: 'Yatƒ±rƒ±mcƒ± g√ºnleri' },
                    { platform: 'Bloomberg/Reuters', score: 88, reason: 'Finansal haber platformlarƒ±' }
                ],
                'dm-4': [
                    { platform: 'Twitter/X', score: 92, reason: 'Finans haberleri, anlƒ±k' },
                    { platform: 'YouTube', score: 88, reason: 'Yatƒ±rƒ±m analiz videolarƒ±' },
                    { platform: 'LinkedIn', score: 85, reason: '≈ûirket g√ºncellemeleri' },
                    { platform: 'Google Search', score: 90, reason: 'Hisse analizi aramasƒ±' }
                ],
                'dm-5': [
                    { platform: 'LinkedIn', score: 98, reason: 'C-level baƒülantƒ±lar' },
                    { platform: 'Email', score: 95, reason: 'Partnership g√∂r√º≈ümeleri' },
                    { platform: 'Industry Events', score: 94, reason: 'Enerji zirvesi, B2B fuarlar' },
                    { platform: 'Webinar', score: 85, reason: 'ƒ∞≈ü geli≈ütirme sunumlarƒ±' }
                ],
            };
            
            // Varsayƒ±lan √∂neriler
            const defaultRecs = [
                { platform: 'Instagram', score: 85, reason: 'Geni≈ü eri≈üim' },
                { platform: 'YouTube', score: 80, reason: 'Video i√ßerik' },
                { platform: 'Facebook', score: 75, reason: 'Demografik hedefleme' }
            ];
            
            const recs = recommendations[seg.id] || defaultRecs;
            
            return recs.map(rec => `
                <div style="display: flex; align-items: center; gap: 10px; padding: 8px 10px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 6px;">
                    <div style="font-size: 14px;">${getPlatformIcon(rec.platform)}</div>
                    <div style="flex: 1;">
                        <div style="font-size: 11px; font-weight: 500;">${rec.platform}</div>
                        <div style="font-size: 9px; color: var(--text-secondary);">${rec.reason}</div>
                    </div>
                    <div style="background: ${getScoreColor(rec.score)}; padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; font-family: 'Space Mono', monospace;">${rec.score}%</div>
                </div>
            `).join('');
        }
        
        function getPlatformIcon(platform) {
            const icons = {
                'Instagram': 'üì∏',
                'YouTube': '‚ñ∂Ô∏è',
                'TikTok': 'üéµ',
                'Facebook': 'üë•',
                'LinkedIn': 'üíº',
                'Pinterest': 'üìå',
                'Google Search': 'üîç',
                'Google Shopping': 'üõí',
                'Google Ads': 'üì¢',
                'Google Display': 'üñºÔ∏è',
                'Google UAC': 'üì≤',
                'TV': 'üì∫',
                'Twitter/X': 'üê¶',
                'WhatsApp': 'üí¨',
                'Email': 'üìß',
                'SMS': 'üì±',
                'Webinar': 'üé•',
                'Local Press': 'üì∞',
                'Local Events': 'üèõÔ∏è',
                'Academic Events': 'üéì',
                'Industry Events': 'üè¢',
                'Investor Events': 'üí∞',
                'Internal App': 'üè†',
                'Press': 'üì∞',
                'Bloomberg/Reuters': 'üìä'
            };
            return icons[platform] || 'üì±';
        }
        
        function getScoreColor(score) {
            if (score >= 90) return 'rgba(16,185,129,0.3)';
            if (score >= 80) return 'rgba(0,212,255,0.3)';
            if (score >= 70) return 'rgba(245,158,11,0.3)';
            return 'rgba(255,255,255,0.1)';
        }

        function updateSegmentMetric(id, metric, value) {
            const seg = segments.find(s => s.id === id);
            if (!seg) return;

            if (metric === 'x') seg.x = Math.min(100, Math.max(0, parseInt(value) || 50));
            else if (metric === 'y') seg.y = Math.min(100, Math.max(0, parseInt(value) || 50));
            else if (metric === 'reach') seg.reachNum = parseReach(value);

            drawQuadrant();
            renderComparison();
            renderSegmentList();
        }

        function removeSegment(id) {
            const seg = segments.find(s => s.id === id);
            const segName = seg ? seg.name : 'Segment';
            segments = segments.filter(s => s.id !== id);
            vennSegments = vennSegments.filter(v => v !== id);
            if (selectedSegmentId === id) selectedSegmentId = null;
            renderSegmentList();
            renderVennSlots();
            drawQuadrant();
            drawVenn();
            renderComparison();
            showToast(segName + ' kaldƒ±rƒ±ldƒ±', 'info');
        }

        function formatReach(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(0) + 'K';
            return num.toString();
        }

        function parseReach(str) {
            str = str.toString().toUpperCase().replace(/\s/g, '');
            if (str.includes('M')) return parseFloat(str) * 1000000;
            if (str.includes('K')) return parseFloat(str) * 1000;
            return parseInt(str) || 1000000;
        }

        function drawQuadrant() {
            const width = quadrantCanvas.width, height = quadrantCanvas.height;
            quadrantCtx.fillStyle = '#0a0a0f';
            quadrantCtx.fillRect(0, 0, width, height);

            const chartWidth = width - padding * 2, chartHeight = height - padding * 2;
            const centerX = padding + chartWidth / 2, centerY = padding + chartHeight / 2;

            // Quadrant backgrounds
            quadrantCtx.fillStyle = 'rgba(255,107,53,0.04)';
            quadrantCtx.fillRect(padding, padding, chartWidth / 2, chartHeight / 2);
            quadrantCtx.fillStyle = 'rgba(16,185,129,0.06)';
            quadrantCtx.fillRect(centerX, padding, chartWidth / 2, chartHeight / 2);
            quadrantCtx.fillStyle = 'rgba(239,68,68,0.04)';
            quadrantCtx.fillRect(padding, centerY, chartWidth / 2, chartHeight / 2);
            quadrantCtx.fillStyle = 'rgba(0,212,255,0.04)';
            quadrantCtx.fillRect(centerX, centerY, chartWidth / 2, chartHeight / 2);

            // Grid
            quadrantCtx.strokeStyle = 'rgba(255,255,255,0.04)';
            quadrantCtx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                quadrantCtx.beginPath();
                quadrantCtx.moveTo(padding + (chartWidth / 10) * i, padding);
                quadrantCtx.lineTo(padding + (chartWidth / 10) * i, height - padding);
                quadrantCtx.stroke();
                quadrantCtx.beginPath();
                quadrantCtx.moveTo(padding, padding + (chartHeight / 10) * i);
                quadrantCtx.lineTo(width - padding, padding + (chartHeight / 10) * i);
                quadrantCtx.stroke();
            }

            // Axes
            quadrantCtx.strokeStyle = 'rgba(255,255,255,0.15)';
            quadrantCtx.lineWidth = 2;
            quadrantCtx.beginPath();
            quadrantCtx.moveTo(centerX, padding);
            quadrantCtx.lineTo(centerX, height - padding);
            quadrantCtx.stroke();
            quadrantCtx.beginPath();
            quadrantCtx.moveTo(padding, centerY);
            quadrantCtx.lineTo(width - padding, centerY);
            quadrantCtx.stroke();

            // Labels
            quadrantCtx.font = '11px Sora';
            quadrantCtx.fillStyle = 'rgba(255,255,255,0.35)';
            quadrantCtx.textAlign = 'center';
            quadrantCtx.fillText('üîß GELƒ∞≈ûTƒ∞R & B√úY√úT', padding + chartWidth / 4, padding + 24);
            quadrantCtx.fillText('üéØ HEMEN HAREKETE GE√á', centerX + chartWidth / 4, padding + 24);
            quadrantCtx.fillText('‚è∏Ô∏è BEKLET', padding + chartWidth / 4, height - padding - 12);
            quadrantCtx.fillText('üì¢ GENƒ∞≈û Kƒ∞TLEYE ULA≈û', centerX + chartWidth / 4, height - padding - 12);

            // Axis labels
            quadrantCtx.fillStyle = 'rgba(255,255,255,0.5)';
            quadrantCtx.font = '12px Space Mono';
            quadrantCtx.fillText('Eri≈üilebilirlik ‚Üí', width / 2, height - 20);
            quadrantCtx.save();
            quadrantCtx.translate(22, height / 2);
            quadrantCtx.rotate(-Math.PI / 2);
            quadrantCtx.fillText('Deƒüer Potansiyeli ‚Üí', 0, 0);
            quadrantCtx.restore();

            // Draw segments
            const maxReach = Math.max(...segments.map(s => s.reachNum), 1);

            segments.forEach(seg => {
                const x = padding + (seg.x / 100) * chartWidth;
                const y = padding + ((100 - seg.y) / 100) * chartHeight;
                const baseSize = (seg.reachNum / maxReach) * 45 + 18;
                const size = selectedSegmentId === seg.id ? baseSize * 1.15 : baseSize;

                // Selection glow
                if (selectedSegmentId === seg.id) {
                    quadrantCtx.beginPath();
                    quadrantCtx.arc(x, y, size + 12, 0, Math.PI * 2);
                    quadrantCtx.fillStyle = seg.color + '40';
                    quadrantCtx.fill();
                }

                // Bubble
                quadrantCtx.beginPath();
                quadrantCtx.arc(x, y, size, 0, Math.PI * 2);
                quadrantCtx.fillStyle = seg.color + '30';
                quadrantCtx.fill();
                quadrantCtx.strokeStyle = seg.color;
                quadrantCtx.lineWidth = selectedSegmentId === seg.id ? 3 : 2;
                quadrantCtx.stroke();

                // Label
                quadrantCtx.fillStyle = '#fff';
                quadrantCtx.font = `${size > 28 ? 12 : 10}px Sora`;
                quadrantCtx.textAlign = 'center';
                quadrantCtx.textBaseline = 'middle';
                const shortName = seg.name.length > 14 ? seg.name.substring(0, 12) + '...' : seg.name;
                quadrantCtx.fillText(shortName, x, y);
            });
        }

        function handleQuadrantMouseMove(e) {
            const rect = quadrantCanvas.getBoundingClientRect();
            const mx = e.clientX - rect.left, my = e.clientY - rect.top;
            const chartWidth = quadrantCanvas.width - padding * 2;
            const chartHeight = quadrantCanvas.height - padding * 2;
            const maxReach = Math.max(...segments.map(s => s.reachNum), 1);

            let found = null;
            segments.forEach(seg => {
                const x = padding + (seg.x / 100) * chartWidth;
                const y = padding + ((100 - seg.y) / 100) * chartHeight;
                const size = (seg.reachNum / maxReach) * 45 + 18;
                if (Math.sqrt((mx - x) ** 2 + (my - y) ** 2) < size) found = seg;
            });

            const tooltip = document.getElementById('tooltip');
            if (found) {
                quadrantCanvas.style.cursor = 'pointer';
                tooltip.innerHTML = `
                    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
                        <div style="width:14px;height:14px;border-radius:50%;background:${found.color};box-shadow:0 0 10px ${found.color};"></div>
                        <strong style="font-size:14px;">${found.name}</strong>
                    </div>
                    <div style="color:var(--text-secondary);font-size:12px;margin-bottom:10px;">${found.parent}</div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:12px;">
                        <div>Eri≈üilebilirlik: <span style="color:var(--accent-blue);font-weight:600;">${found.x}</span></div>
                        <div>Deƒüer: <span style="color:var(--accent-purple);font-weight:600;">${found.y}</span></div>
                        <div>Hacim: <span style="color:var(--accent-green);font-weight:600;">${formatReach(found.reachNum)}</span></div>
                    </div>
                `;
                tooltip.style.display = 'block';
                tooltip.style.left = (e.clientX + 15) + 'px';
                tooltip.style.top = (e.clientY + 15) + 'px';
            } else {
                quadrantCanvas.style.cursor = 'default';
                tooltip.style.display = 'none';
            }
        }

        function handleQuadrantClick(e) {
            const rect = quadrantCanvas.getBoundingClientRect();
            const mx = e.clientX - rect.left, my = e.clientY - rect.top;
            const chartWidth = quadrantCanvas.width - padding * 2;
            const chartHeight = quadrantCanvas.height - padding * 2;
            const maxReach = Math.max(...segments.map(s => s.reachNum), 1);

            segments.forEach(seg => {
                const x = padding + (seg.x / 100) * chartWidth;
                const y = padding + ((100 - seg.y) / 100) * chartHeight;
                const size = (seg.reachNum / maxReach) * 45 + 18;
                if (Math.sqrt((mx - x) ** 2 + (my - y) ** 2) < size) {
                    selectSegment(seg.id);
                }
            });
        }

        // Venn Functions
        function addToVenn(id) {
            if (vennSegments.includes(id)) return;
            if (vennSegments.length >= 4) { alert('Maksimum 4 segment'); return; }
            vennSegments.push(id);
            renderVennSlots();
            drawVenn();
        }

        function removeFromVenn(id) {
            vennSegments = vennSegments.filter(v => v !== id);
            renderVennSlots();
            drawVenn();
        }

        function renderVennSlots() {
            const container = document.getElementById('vennSlots');
            let html = '';
            for (let i = 0; i < 4; i++) {
                if (vennSegments[i]) {
                    const seg = segments.find(s => s.id === vennSegments[i]);
                    if (seg) {
                        html += `<div class="venn-slot filled"><div class="venn-slot-color" style="background:${seg.color};color:${seg.color};"></div><div class="venn-slot-name">${seg.name}</div><button class="venn-slot-remove" onclick="removeFromVenn('${seg.id}')">√ó</button></div>`;
                    }
                } else {
                    html += `<div class="venn-slot" ondrop="dropToVenn(event, ${i})" ondragover="event.preventDefault()"><div class="venn-slot-placeholder">Slot ${i + 1} - Segment s√ºr√ºkleyin</div></div>`;
                }
            }
            container.innerHTML = html;
            calculateIntersections();
        }

        function dragStart(e, id) { e.dataTransfer.setData('text/plain', id); }
        function dropToVenn(e, slotIndex) {
            e.preventDefault();
            const id = e.dataTransfer.getData('text/plain');
            if (!vennSegments.includes(id) && vennSegments.length < 4) {
                vennSegments.push(id);
                renderVennSlots();
                drawVenn();
            }
        }

        function drawVenn() {
            const width = vennCanvas.width, height = vennCanvas.height;
            vennCtx.fillStyle = '#0a0a0f';
            vennCtx.fillRect(0, 0, width, height);

            const vennSegs = vennSegments.map(id => segments.find(s => s.id === id)).filter(Boolean);
            if (vennSegs.length < 2) {
                vennCtx.fillStyle = 'var(--text-secondary)';
                vennCtx.font = '15px Sora';
                vennCtx.textAlign = 'center';
                vennCtx.fillText('En az 2 segment se√ßin', width / 2, height / 2);
                return;
            }

            const centerX = width / 2, centerY = height / 2, radius = 120;
            const positions = [{ x: centerX - 60, y: centerY - 40 }, { x: centerX + 60, y: centerY - 40 }, { x: centerX - 60, y: centerY + 60 }, { x: centerX + 60, y: centerY + 60 }];

            vennSegs.forEach((seg, i) => {
                vennCtx.beginPath();
                vennCtx.arc(positions[i].x, positions[i].y, radius, 0, Math.PI * 2);
                vennCtx.fillStyle = seg.color + '25';
                vennCtx.fill();
                vennCtx.strokeStyle = seg.color;
                vennCtx.lineWidth = 3;
                vennCtx.stroke();
            });

            const labelOffsets = [{ x: -80, y: -100 }, { x: 80, y: -100 }, { x: -80, y: 120 }, { x: 80, y: 120 }];
            vennSegs.forEach((seg, i) => {
                vennCtx.fillStyle = seg.color;
                vennCtx.font = 'bold 13px Sora';
                vennCtx.textAlign = 'center';
                const lx = positions[i].x + labelOffsets[i].x, ly = positions[i].y + labelOffsets[i].y;
                vennCtx.fillText(seg.name, lx, ly);
                vennCtx.fillStyle = '#888';
                vennCtx.font = '12px Space Mono';
                vennCtx.fillText(formatReach(seg.reachNum), lx, ly + 18);
            });

            if (vennSegs.length >= 2) {
                vennCtx.fillStyle = 'rgba(255,255,255,0.9)';
                vennCtx.font = 'bold 16px Space Mono';
                vennCtx.textAlign = 'center';
                const intersectReach = calculateTotalIntersection();
                vennCtx.fillText(formatReach(intersectReach), centerX, centerY);
                vennCtx.fillStyle = '#888';
                vennCtx.font = '11px Sora';
                vennCtx.fillText('Kesi≈üim', centerX, centerY + 18);
            }
        }

        function calculateTotalIntersection() {
            const vennSegs = vennSegments.map(id => segments.find(s => s.id === id)).filter(Boolean);
            if (vennSegs.length < 2) return 0;
            const minReach = Math.min(...vennSegs.map(s => s.reachNum));
            return Math.floor(minReach * (0.15 + Math.random() * 0.15));
        }

        function calculateIntersections() {
            const container = document.getElementById('intersectionResults');
            const vennSegs = vennSegments.map(id => segments.find(s => s.id === id)).filter(Boolean);

            if (vennSegs.length < 2) {
                container.innerHTML = '<p style="color:var(--text-secondary);font-size:12px;text-align:center;">En az 2 segment se√ßin</p>';
                return;
            }

            let html = '';
            const totalReach = vennSegs.reduce((sum, s) => sum + s.reachNum, 0);

            vennSegs.forEach(seg => {
                const pct = ((seg.reachNum / totalReach) * 100).toFixed(1);
                html += `<div class="intersection-item"><div class="intersection-label"><div class="intersection-dots"><div class="intersection-dot" style="background:${seg.color};"></div></div>${seg.name}</div><div><span class="intersection-value">${formatReach(seg.reachNum)}</span><span class="intersection-pct">(${pct}%)</span></div></div>`;
            });

            for (let i = 0; i < vennSegs.length; i++) {
                for (let j = i + 1; j < vennSegs.length; j++) {
                    const intersect = Math.floor(Math.min(vennSegs[i].reachNum, vennSegs[j].reachNum) * (0.1 + Math.random() * 0.2));
                    html += `<div class="intersection-item"><div class="intersection-label"><div class="intersection-dots"><div class="intersection-dot" style="background:${vennSegs[i].color};"></div><div class="intersection-dot" style="background:${vennSegs[j].color};"></div></div>Kesi≈üim</div><div><span class="intersection-value">${formatReach(intersect)}</span></div></div>`;
                }
            }

            const totalIntersect = calculateTotalIntersection();
            html += `<div class="intersection-item" style="background:rgba(0,212,255,0.1);border:1px solid rgba(0,212,255,0.3);"><div class="intersection-label"><div class="intersection-dots">${vennSegs.map(s => `<div class="intersection-dot" style="background:${s.color};"></div>`).join('')}</div><strong>Toplam Kesi≈üim</strong></div><div><span class="intersection-value">${formatReach(totalIntersect)}</span></div></div>`;
            container.innerHTML = html;
        }

        function renderComparison() {
            const tbody = document.getElementById('comparisonBody');
            const maxReach = Math.max(...segments.map(s => s.reachNum), 1);

            tbody.innerHTML = segments.map(seg => {
                const priorityScore = Math.round((seg.x * 0.4 + seg.y * 0.6));
                const reachPct = (seg.reachNum / maxReach * 100).toFixed(0);
                
                // Platform badges
                const metaBadge = seg.metaReachFormatted 
                    ? `<span style="display:inline-flex;align-items:center;gap:4px;padding:4px 8px;background:rgba(24,119,242,0.15);border:1px solid rgba(24,119,242,0.3);border-radius:6px;font-size:10px;color:#60a5fa;">${seg.metaReachFormatted}</span>`
                    : `<span style="color:var(--text-secondary);font-size:10px;">--</span>`;
                    
                const tiktokBadge = seg.tiktokReachFormatted 
                    ? `<span style="display:inline-flex;align-items:center;gap:4px;padding:4px 8px;background:rgba(238,45,86,0.15);border:1px solid rgba(238,45,86,0.3);border-radius:6px;font-size:10px;color:#ee2d5e;">${seg.tiktokReachFormatted}</span>`
                    : `<span style="color:var(--text-secondary);font-size:10px;">--</span>`;
                
                return `
                    <tr>
                        <td><div style="display:flex;align-items:center;gap:10px;"><div style="width:14px;height:14px;border-radius:50%;background:${seg.color};box-shadow:0 0 8px ${seg.color};"></div><strong>${seg.name}</strong></div></td>
                        <td style="color:var(--text-secondary);">${seg.parent}</td>
                        <td><div style="display:flex;align-items:center;gap:10px;"><div class="comparison-bar" style="width:100px;"><div class="comparison-bar-fill" style="width:${reachPct}%;background:${seg.color};"></div></div><span style="color:var(--accent-blue);font-weight:600;font-family:'Space Mono',monospace;">${formatReach(seg.reachNum)}</span></div></td>
                        <td><div style="display:flex;align-items:center;gap:10px;"><div class="comparison-bar" style="width:70px;"><div class="comparison-bar-fill" style="width:${seg.x}%;background:var(--accent-blue);"></div></div><span>${seg.x}</span></div></td>
                        <td><div style="display:flex;align-items:center;gap:10px;"><div class="comparison-bar" style="width:70px;"><div class="comparison-bar-fill" style="width:${seg.y}%;background:var(--accent-purple);"></div></div><span>${seg.y}</span></div></td>
                        <td>${metaBadge}</td>
                        <td>${tiktokBadge}</td>
                        <td><span style="font-weight:700;font-family:'Space Mono',monospace;color:${priorityScore >= 60 ? 'var(--accent-green)' : priorityScore >= 40 ? 'var(--accent-orange)' : 'var(--accent-red)'};">${priorityScore}</span></td>
                    </tr>
                `;
            }).join('');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tabName));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.toggle('active', c.id === `tab-${tabName}`));
            if (tabName === 'quadrant') setTimeout(resizeQuadrantCanvas, 100);
        }

        function exportPNG() {
            const btn = event.currentTarget;
            setButtonLoading(btn, true);
            
            setTimeout(() => {
                const activeTab = document.querySelector('.tab.active').dataset.tab;
                const canvas = activeTab === 'venn' ? vennCanvas : quadrantCanvas;
                const link = document.createElement('a');
                link.download = `segment-${activeTab}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                showToast('PNG olarak indirildi', 'success');
                setButtonLoading(btn, false);
            }, 400);
        }

        function exportExcel() {
            const btn = event.currentTarget;
            setButtonLoading(btn, true);
            
            setTimeout(() => {
                let html = '<html><head><meta charset="UTF-8"></head><body><table border="1">';
                html += '<tr><th>Segment</th><th>Kategori</th><th>Eri≈üim</th><th>Eri≈üilebilirlik</th><th>Deƒüer</th><th>Meta Interest</th><th>TikTok Interest</th><th>√ñncelik</th></tr>';
                segments.forEach(seg => {
                    html += `<tr><td>${seg.name}</td><td>${seg.parent}</td><td>${formatReach(seg.reachNum)}</td><td>${seg.x}</td><td>${seg.y}</td><td>${seg.metaReachFormatted || '-'}</td><td>${seg.tiktokReachFormatted || '-'}</td><td>${Math.round((seg.x * 0.4 + seg.y * 0.6))}</td></tr>`;
                });
                html += '</table></body></html>';
                const blob = new Blob([html], { type: 'application/vnd.ms-excel' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'segment-analizi.xls';
                link.click();
                showToast(segments.length + ' segment Excel olarak indirildi', 'success');
                setButtonLoading(btn, false);
            }, 500);
        }

        // === LOADING BUTTON HELPER ===
        const spinnerSVG = '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" opacity="0.25"/><path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/></svg>';
        
        function setButtonLoading(btn, isLoading) {
            if (!btn) return;
            if (isLoading) {
                btn.dataset.originalHtml = btn.innerHTML;
                btn.classList.add('btn-loading');
                btn.disabled = true;
                btn.innerHTML = '<span class="btn-text">' + btn.innerHTML + '</span><span class="btn-spinner">' + spinnerSVG + '</span>';
            } else {
                btn.classList.remove('btn-loading');
                btn.disabled = false;
                if (btn.dataset.originalHtml) btn.innerHTML = btn.dataset.originalHtml;
            }
        }
        
        // === DEBOUNCE HELPER ===
        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        // === TOAST NOTIFICATION SYSTEM ===
        (function() {
            var container = document.createElement('div');
            container.className = 'toast-container';
            document.body.appendChild(container);
            
            window.showToast = function(message, type, duration) {
                type = type || 'success';
                duration = duration || 4000;
                
                var icons = {
                    success: '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6 9 17l-5-5"/></svg>',
                    error: '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>',
                    info: '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>',
                    warning: '<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>'
                };
                
                var toast = document.createElement('div');
                toast.className = 'toast toast-' + type;
                toast.innerHTML = '<div class="toast-icon">' + icons[type] + '</div>' +
                    '<div class="toast-content"><div class="toast-message">' + message + '</div></div>' +
                    '<button class="toast-close" onclick="this.parentElement.remove()">' +
                    '<svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button>' +
                    '<div class="toast-progress" style="animation-duration:' + duration + 'ms"></div>';
                
                container.appendChild(toast);
                requestAnimationFrame(function() { toast.classList.add('visible'); });
                
                setTimeout(function() {
                    toast.classList.add('hiding');
                    toast.classList.remove('visible');
                    setTimeout(function() { toast.remove(); }, 300);
                }, duration);
            };
        })();

        init();
    </script>
</body>
</html>
